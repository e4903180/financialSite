{"ast":null,"code":"import _slicedToArray from \"/home/cosbi/financialSite/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/cosbi/financialSite/frontend/src/component/subButton/subSupportResistanceForm.js\";\nimport React, { useState } from 'react';\nimport { Typeahead } from 'react-bootstrap-typeahead';\nimport { AutoCom } from '../../autoCom';\nimport { Alert, Snackbar } from '@mui/material';\nimport { rootApiIP } from '../../constant';\nimport axios from 'axios';\n\nfunction SubSupportResistanceForm(props) {\n  var Today = new Date();\n  var year = Today.getFullYear();\n  var month = Today.getMonth() + 1 - 1;\n  var date = 1;\n\n  var _useState = useState([{\n    \"ID\": 0,\n    \"stock_num_name\": \"\"\n  }]),\n      _useState2 = _slicedToArray(_useState, 2),\n      stockNum = _useState2[0],\n      setStockNum = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      inputError = _useState4[0],\n      setInputError = _useState4[1];\n\n  var _useState5 = useState((year - 5).toString() + \"-01-01\"),\n      _useState6 = _slicedToArray(_useState5, 2),\n      startDate = _useState6[0],\n      setStartDate = _useState6[1];\n\n  var _useState7 = useState(\"\"),\n      _useState8 = _slicedToArray(_useState7, 2),\n      endDate = _useState8[0],\n      setEndDate = _useState8[1];\n\n  var _useState9 = useState(\"method1\"),\n      _useState10 = _slicedToArray(_useState9, 2),\n      method = _useState10[0],\n      setMethod = _useState10[1];\n\n  var _useState11 = useState(20),\n      _useState12 = _slicedToArray(_useState11, 2),\n      maLen = _useState12[0],\n      setMaLen = _useState12[1];\n\n  var _useState13 = useState(\"sma\"),\n      _useState14 = _slicedToArray(_useState13, 2),\n      maType = _useState14[0],\n      setMaType = _useState14[1];\n\n  var _useState15 = useState(false),\n      _useState16 = _slicedToArray(_useState15, 2),\n      sub = _useState16[0],\n      setSub = _useState16[1];\n\n  var _useState17 = useState(false),\n      _useState18 = _slicedToArray(_useState17, 2),\n      open = _useState18[0],\n      setOpen = _useState18[1];\n\n  if (month === 0) {\n    year -= 1;\n    month = 12;\n  }\n\n  var TodayDate = year.toString() + \"-\" + month.toString().padStart(2, '0') + \"-\" + date.toString().padStart(2, '0');\n  var autocom = AutoCom.AutoComList;\n\n  function submit(e) {\n    e.preventDefault();\n\n    if (stockNum.length !== 0 && autocom.map(function (element) {\n      return element.stock_num_name;\n    }).includes(stockNum[0][\"stock_num_name\"]) === true && endDate !== \"\") {\n      setInputError(false);\n      axios.post(rootApiIP + \"/data/handle_support_resistance_sub\", {\n        \"stockNum\": stockNum[0][\"stock_num_name\"].slice(0, 4),\n        \"startDate\": startDate,\n        \"endDate\": endDate,\n        \"maType\": maType,\n        \"maLen\": maLen,\n        \"method\": method,\n        \"subType\": props.subType\n      }).then(function (res) {\n        setOpen(true);\n        setSub(false);\n      }).catch(function (res) {\n        if (res.response.data === \"Session expired\") window.location.reload();\n        setOpen(true);\n        setSub(true);\n      });\n    } else {\n      setInputError(true);\n    }\n  }\n\n  var handleClose = function handleClose(event, reason) {\n    if (reason === 'clickaway') {\n      return;\n    }\n\n    setOpen(false);\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal fade\",\n    id: \"checkEndTimeModal\",\n    tabIndex: \"-1\",\n    \"aria-hidden\": \"true\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-dialog modal-dialog-centered\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"modal-title fs-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 29\n    }\n  }, \"\\u8A02\\u95B1\\u8CC7\\u8A0A\\u78BA\\u8A8D\"), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"btn-close\",\n    \"data-bs-dismiss\": \"modal\",\n    \"aria-label\": \"Close\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 29\n    }\n  }))))));\n}\n\nexport default SubSupportResistanceForm;","map":{"version":3,"sources":["/home/cosbi/financialSite/frontend/src/component/subButton/subSupportResistanceForm.js"],"names":["React","useState","Typeahead","AutoCom","Alert","Snackbar","rootApiIP","axios","SubSupportResistanceForm","props","Today","Date","year","getFullYear","month","getMonth","date","stockNum","setStockNum","inputError","setInputError","toString","startDate","setStartDate","endDate","setEndDate","method","setMethod","maLen","setMaLen","maType","setMaType","sub","setSub","open","setOpen","TodayDate","padStart","autocom","AutoComList","submit","e","preventDefault","length","map","element","stock_num_name","includes","post","slice","subType","then","res","catch","response","data","window","location","reload","handleClose","event","reason"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { Typeahead } from 'react-bootstrap-typeahead';\nimport { AutoCom } from '../../autoCom';\nimport { Alert, Snackbar } from '@mui/material';\nimport { rootApiIP } from '../../constant';\nimport axios from 'axios';\n\nfunction SubSupportResistanceForm(props) {\n    var Today = new Date();\n    let year = Today.getFullYear()\n    let month = (Today.getMonth() + 1) - 1\n    const date = 1\n\n    const [stockNum, setStockNum] = useState([{\"ID\" : 0, \"stock_num_name\" : \"\"}]);\n    const [inputError, setInputError] = useState(false);\n    const [startDate, setStartDate] = useState((year - 5).toString() + \"-01-01\");\n    const [endDate, setEndDate] = useState(\"\");\n    const [method, setMethod] = useState(\"method1\");\n    const [maLen, setMaLen] = useState(20);\n    const [maType, setMaType] = useState(\"sma\");\n    const [sub, setSub] = useState(false);\n    const [open, setOpen] = useState(false);\n\n    if(month === 0){\n        year -= 1\n        month = 12\n    }\n\n    var TodayDate = year.toString() + \"-\" + month.toString().padStart(2, '0') + \"-\" + date.toString().padStart(2, '0')\n    const autocom = AutoCom.AutoComList;\n\n    function submit(e){\n        e.preventDefault()\n\n        if((stockNum.length !== 0) && (autocom.map(element => element.stock_num_name).includes(stockNum[0][\"stock_num_name\"]) === true) && (endDate !== \"\")){\n            setInputError(false)\n\n            axios.post(rootApiIP + \"/data/handle_support_resistance_sub\", {\n                \"stockNum\" : stockNum[0][\"stock_num_name\"].slice(0, 4),\n                \"startDate\" : startDate,\n                \"endDate\" : endDate,\n                \"maType\" : maType,\n                \"maLen\" : maLen,\n                \"method\" : method,\n                \"subType\" : props.subType\n            })\n            .then((res) => {\n                setOpen(true)\n                setSub(false)\n            })\n            .catch((res) => {\n                if(res.response.data === \"Session expired\") window.location.reload()\n                setOpen(true)\n                setSub(true)\n            })\n        }else{\n            setInputError(true)\n        }\n    }\n\n    const handleClose = (event, reason) => {\n        if (reason === 'clickaway') {\n          return;\n        }\n    \n        setOpen(false);\n    };\n\n    return (\n        <>\n            <div className = \"modal fade\" id = \"checkEndTimeModal\" tabIndex = \"-1\" aria-hidden = \"true\">\n                <div className = \"modal-dialog modal-dialog-centered\">\n                    <div className = \"modal-content\">\n                        <div className = \"modal-header\">\n                            <h1 className = \"modal-title fs-5\">訂閱資訊確認</h1>\n                            <button type = \"button\" className = \"btn-close\" data-bs-dismiss = \"modal\" aria-label = \"Close\"></button>\n                        </div>\n\n                        \n                    </div>\n                </div>\n            </div>\n        </>\n    );\n}\n\nexport default SubSupportResistanceForm;"]},"metadata":{},"sourceType":"module"}