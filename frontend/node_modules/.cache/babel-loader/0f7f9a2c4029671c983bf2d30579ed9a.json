{"ast":null,"code":"import _toConsumableArray from \"/home/cosbi/financialSite/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"/home/cosbi/financialSite/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/cosbi/financialSite/frontend/src/component/chooseTickerPage/chooseTickerDetail.js\";\nimport axios from 'axios';\nimport React, { useEffect, useState } from 'react';\nimport { useSearchParams } from 'react-router-dom';\nimport { rootApiIP } from '../../constant';\nimport HighchartStockComp from '../highchart/highchatStockComp';\n\nfunction ChooseTickerDetail() {\n  var scale = {\n    0: [{\n      \"height\": \"80%\"\n    }, {\n      \"top\": \"80%\",\n      \"height\": \"20%\"\n    }],\n    1: [{\n      \"height\": \"70%\"\n    }, {\n      \"top\": \"70%\",\n      \"height\": \"15%\"\n    }, {\n      \"top\": \"85%\",\n      \"height\": \"15%\"\n    }],\n    2: [{\n      \"height\": \"60%\"\n    }, {\n      \"top\": \"60%\",\n      \"height\": \"13%\"\n    }, {\n      \"top\": \"73%\",\n      \"height\": \"13%\"\n    }, {\n      \"top\": \"86%\",\n      \"height\": \"14%\"\n    }],\n    3: [{\n      \"height\": \"50%\"\n    }, {\n      \"top\": \"50%\",\n      \"height\": \"12%\"\n    }, {\n      \"top\": \"62%\",\n      \"height\": \"12%\"\n    }, {\n      \"top\": \"74%\",\n      \"height\": \"12%\"\n    }, {\n      \"top\": \"86%\",\n      \"height\": \"14%\"\n    }]\n  };\n\n  var _useSearchParams = useSearchParams(),\n      _useSearchParams2 = _slicedToArray(_useSearchParams, 2),\n      searchParams = _useSearchParams2[0],\n      setSearchParams = _useSearchParams2[1];\n\n  var _useState = useState(0),\n      _useState2 = _slicedToArray(_useState, 2),\n      scaleType = _useState2[0],\n      setScaleType = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      stockNum = _useState4[0],\n      setStockNum = _useState4[1];\n\n  var _useState5 = useState([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      conditions = _useState6[0],\n      setConditions = _useState6[1];\n\n  var _useState7 = useState(true),\n      _useState8 = _slicedToArray(_useState7, 2),\n      loading = _useState8[0],\n      setLoading = _useState8[1];\n\n  var _useState9 = useState({\n    yAxis: [],\n    xAxis: {\n      type: \"datetime\"\n    },\n    chart: {\n      height: 600\n    },\n    accessibility: {\n      enabled: false\n    },\n    series: [],\n    stockTools: {\n      gui: {\n        buttons: ['indicators', 'separator', 'simpleShapes', 'lines', 'crookedLines', 'measure', 'advanced', 'toggleAnnotations', 'separator', 'verticalLabels', 'flags', 'separator', 'zoomChange', 'fullScreen', 'typeChange', 'separator', 'currentPriceIndicator', 'saveChart']\n      }\n    },\n    tooltip: {\n      valueDecimals: 2\n    },\n    rangeSelector: {\n      selected: 0\n    },\n    plotOptions: {\n      series: {\n        dataGrouping: {\n          enabled: false\n        }\n      },\n      candlestick: {\n        color: 'green',\n        upColor: 'red'\n      }\n    }\n  }),\n      _useState10 = _slicedToArray(_useState9, 2),\n      options = _useState10[0],\n      setOptions = _useState10[1];\n\n  useEffect(function () {\n    searchParams.forEach(function (value, key) {\n      if (key === \"stock_num\") {\n        setStockNum(value);\n      }\n\n      if (key === \"conditions\") {\n        var temp = value.split(\",\");\n        temp.forEach(function (value, index) {\n          conditions.push(value);\n          setConditions(_toConsumableArray(conditions));\n          setScaleType(scaleType + 1);\n          setOptions({\n            yAxis: scale[scaleType + 1]\n          });\n        });\n      }\n    }); // axios.get(rootApiIP + \"/data/filter_ticker_detail\", { \n    //     params : {\n    //         \"stock_num\" : stockNum,\n    //         \"conditions\" : conditions\n    //     }\n    // })\n    // .then((res) => {\n    //     setOptions({\n    //         series : [\n    //             {\n    //                 type : 'candlestick',\n    //                 name : 'Kline',\n    //                 data : res.data[\"Kline\"],\n    //             },\n    //         ]\n    //     })\n    // })\n    // .catch((res) => {\n    //     if(res.response.data === \"Session expired\") window.location.reload()\n    // })\n  }, []);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Backdrop, {\n    sx: {\n      color: '#fff',\n      zIndex: function zIndex(theme) {\n        return theme.zIndex.drawer + 1;\n      }\n    },\n    open: loading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 25\n    }\n  }, \"\\u8CC7\\u6599\\u8F09\\u5165\\u4E2D\\u2003\", /*#__PURE__*/React.createElement(CircularProgress, {\n    color: \"inherit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(HighchartStockComp, {\n    options: options,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 13\n    }\n  }));\n}\n\nexport default ChooseTickerDetail;","map":{"version":3,"sources":["/home/cosbi/financialSite/frontend/src/component/chooseTickerPage/chooseTickerDetail.js"],"names":["axios","React","useEffect","useState","useSearchParams","rootApiIP","HighchartStockComp","ChooseTickerDetail","scale","searchParams","setSearchParams","scaleType","setScaleType","stockNum","setStockNum","conditions","setConditions","loading","setLoading","yAxis","xAxis","type","chart","height","accessibility","enabled","series","stockTools","gui","buttons","tooltip","valueDecimals","rangeSelector","selected","plotOptions","dataGrouping","candlestick","color","upColor","options","setOptions","forEach","value","key","temp","split","index","push","zIndex","theme","drawer"],"mappings":"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","sourcesContent":["import axios from 'axios';\nimport React, { useEffect, useState } from 'react';\nimport { useSearchParams } from 'react-router-dom';\nimport { rootApiIP } from '../../constant';\nimport HighchartStockComp from '../highchart/highchatStockComp';\n\nfunction ChooseTickerDetail() {\n    const scale = {\n        0 : [{ \"height\" : \"80%\" }, { \"top\" : \"80%\", \"height\" : \"20%\" }],\n        1 : [{ \"height\" : \"70%\" }, { \"top\" : \"70%\", \"height\" : \"15%\" }, { \"top\" : \"85%\", \"height\" : \"15%\" }],\n        2 : [{ \"height\" : \"60%\" }, { \"top\" : \"60%\", \"height\" : \"13%\" }, { \"top\" : \"73%\", \"height\" : \"13%\" }, { \"top\" : \"86%\", \"height\" : \"14%\" }],\n        3 : [{ \"height\" : \"50%\" }, { \"top\" : \"50%\", \"height\" : \"12%\" }, { \"top\" : \"62%\", \"height\" : \"12%\" }, { \"top\" : \"74%\", \"height\" : \"12%\" }, { \"top\" : \"86%\", \"height\" : \"14%\" }]\n    }\n\n    const [searchParams, setSearchParams] = useSearchParams();\n    const [scaleType, setScaleType] = useState(0)\n    const [stockNum, setStockNum] = useState(\"\")\n    const [conditions, setConditions] = useState([])\n    const [loading, setLoading] = useState(true)\n\n    const [options, setOptions] = useState({\n        yAxis: [],\n        xAxis: {\n            type : \"datetime\",\n        },\n        chart : {\n            height : 600\n        },\n        accessibility: {\n            enabled : false\n        },\n        series: [],\n        stockTools : {\n            gui : {\n                buttons : [ 'indicators', 'separator', 'simpleShapes', 'lines', 'crookedLines', 'measure', 'advanced',\n                'toggleAnnotations', 'separator', 'verticalLabels', 'flags', 'separator', 'zoomChange', 'fullScreen',\n                'typeChange', 'separator', 'currentPriceIndicator', 'saveChart' ]\n            }\n        },\n        tooltip: {\n            valueDecimals: 2\n        },\n        rangeSelector : {\n            selected: 0\n        },\n        plotOptions : {\n            series : {\n                dataGrouping : {\n                    enabled : false\n                }\n            },\n            candlestick: {\n                color: 'green',\n                upColor: 'red'\n            }\n        }\n    });\n\n    useEffect(() => {\n        searchParams.forEach((value, key) => {\n            if(key === \"stock_num\"){\n                setStockNum(value)\n            }\n\n            if(key === \"conditions\"){\n                let temp = value.split(\",\")\n\n                temp.forEach((value, index) => {\n                    conditions.push(value)\n\n                    setConditions([...conditions])\n                    setScaleType(scaleType + 1)\n    \n                    setOptions({\n                        yAxis : scale[scaleType + 1]\n                    })\n                })\n            }\n        });\n\n        // axios.get(rootApiIP + \"/data/filter_ticker_detail\", { \n        //     params : {\n        //         \"stock_num\" : stockNum,\n        //         \"conditions\" : conditions\n        //     }\n        // })\n        // .then((res) => {\n        //     setOptions({\n        //         series : [\n        //             {\n        //                 type : 'candlestick',\n        //                 name : 'Kline',\n        //                 data : res.data[\"Kline\"],\n        //             },\n        //         ]\n        //     })\n        // })\n        // .catch((res) => {\n        //     if(res.response.data === \"Session expired\") window.location.reload()\n        // })\n    }, [])\n\n    return (\n        <>\n                        <Backdrop\n                sx = {{ color: '#fff', zIndex: (theme) => theme.zIndex.drawer + 1 }}\n                open = { loading }\n            >\n                資料載入中&emsp;\n                <CircularProgress color = \"inherit\" />\n            </Backdrop>\n            <HighchartStockComp options = {options} />\n        </>\n    );\n}\n\nexport default ChooseTickerDetail;"]},"metadata":{},"sourceType":"module"}