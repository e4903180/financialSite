{"ast":null,"code":"import _slicedToArray from \"/home/cosbi/financialSite/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/cosbi/financialSite/frontend/src/component/topTickerPage/topTickerComp.js\";\nimport { Backdrop, CircularProgress } from '@mui/material';\nimport React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { config } from '../../constant';\nimport HighchartBarComp from '../highchart/highchartBarComp';\n\nfunction TopTickerComp() {\n  var Today = new Date();\n  var todayDate = Today.getFullYear() + \"-\" + String(Today.getMonth() + 1).padStart(2, '0') + \"-\" + String(Today.getDate()).padStart(2, '0');\n\n  var _useState = useState(\"2023-01-01\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      startDate = _useState2[0],\n      setStartDate = _useState2[1];\n\n  var _useState3 = useState(todayDate),\n      _useState4 = _slicedToArray(_useState3, 2),\n      endDate = _useState4[0],\n      setEndDate = _useState4[1];\n\n  var _useState5 = useState(5),\n      _useState6 = _slicedToArray(_useState5, 2),\n      top = _useState6[0],\n      setTop = _useState6[1];\n\n  var _useState7 = useState(\"all\"),\n      _useState8 = _slicedToArray(_useState7, 2),\n      recommend = _useState8[0],\n      setRecommend = _useState8[1];\n\n  var _useState9 = useState(\"all\"),\n      _useState10 = _slicedToArray(_useState9, 2),\n      category = _useState10[0],\n      setCategory = _useState10[1];\n\n  var _useState11 = useState([]),\n      _useState12 = _slicedToArray(_useState11, 2),\n      categoryList = _useState12[0],\n      setCategoryList = _useState12[1];\n\n  var _useState13 = useState(\"all\"),\n      _useState14 = _slicedToArray(_useState13, 2),\n      type = _useState14[0],\n      setType = _useState14[1];\n\n  var _useState15 = useState(true),\n      _useState16 = _slicedToArray(_useState15, 2),\n      loading = _useState16[0],\n      setLoading = _useState16[1];\n\n  var _useState17 = useState({\n    chart: {\n      type: 'bar',\n      height: 500\n    },\n    title: {\n      text: \"\\u71B1\\u9580\\u7814\\u7A76\\u5831\\u544ATop\".concat(top)\n    },\n    accessibility: {\n      enabled: false\n    },\n    yAxis: {\n      title: {\n        text: '投資建議分佈'\n      }\n    },\n    plotOptions: {\n      series: {\n        stacking: 'normal'\n      }\n    }\n  }),\n      _useState18 = _slicedToArray(_useState17, 2),\n      options = _useState18[0],\n      setOptions = _useState18[1];\n\n  var submit = function submit(e) {\n    e.preventDefault();\n    axios.get(config[\"rootApiIP\"] + \"/data/top_ticker\", {\n      params: {\n        \"start_date\": startDate,\n        \"end_date\": endDate,\n        \"top\": top,\n        \"recommend\": recommend,\n        \"category\": category,\n        \"type\": type\n      }\n    }).then(function (res) {\n      var categories = [];\n      var series = {\n        \"buy\": [],\n        \"sell\": [],\n        \"hold\": [],\n        \"interval\": []\n      };\n      res.data[\"recommend_result\"].map(function (ele, idx) {\n        categories.push(ele[\"stock_name\"]);\n        series[\"buy\"].push(ele[\"recommend_distribution\"][\"buy\"]);\n        series[\"sell\"].push(ele[\"recommend_distribution\"][\"sell\"]);\n        series[\"hold\"].push(ele[\"recommend_distribution\"][\"hold\"]);\n        series[\"interval\"].push(ele[\"recommend_distribution\"][\"interval\"]);\n      });\n      setOptions({\n        xAxis: {\n          categories: categories\n        },\n        series: [{\n          name: \"區間操作\",\n          data: series[\"interval\"]\n        }, {\n          name: \"賣出\",\n          data: series[\"sell\"]\n        }, {\n          name: \"持有\",\n          data: series[\"hold\"]\n        }, {\n          name: \"買進\",\n          data: series[\"buy\"]\n        }]\n      });\n    }).catch(function (res) {\n      if (res.response.data === \"Session expired\") window.location.reload();\n    });\n  };\n\n  var typeChangeHandler = function typeChangeHandler(value) {\n    setType(value);\n    setCategory(\"all\");\n    axios.get(config[\"rootApiIP\"] + \"/data/ticker_category\", {\n      params: {\n        \"type\": value\n      }\n    }).then(function (res) {\n      setCategoryList([]);\n      setCategoryList(res.data);\n    }).catch(function (res) {\n      if (res.response.data === \"Session expired\") window.location.reload();\n    });\n  };\n\n  useEffect(function () {\n    axios.get(config[\"rootApiIP\"] + \"/data/ticker_category\", {\n      params: {\n        \"type\": \"all\"\n      }\n    }).then(function (res) {\n      setCategoryList(res.data);\n    }).catch(function (res) {\n      if (res.response.data === \"Session expired\") window.location.reload();\n    });\n    axios.get(config[\"rootApiIP\"] + \"/data/top_ticker\", {\n      params: {\n        \"start_date\": startDate,\n        \"end_date\": endDate,\n        \"top\": top,\n        \"recommend\": recommend,\n        \"category\": category,\n        \"type\": type\n      }\n    }).then(function (res) {\n      console.log(res.data);\n      var categories = [];\n      var series = {\n        \"buy\": [],\n        \"sell\": [],\n        \"hold\": [],\n        \"interval\": []\n      };\n      res.data[\"recommend_result\"].map(function (ele, idx) {\n        categories.push(ele[\"stock_name\"]);\n        series[\"buy\"].push(ele[\"recommend_distribution\"][\"buy\"]);\n        series[\"sell\"].push(ele[\"recommend_distribution\"][\"sell\"]);\n        series[\"hold\"].push(ele[\"recommend_distribution\"][\"hold\"]);\n        series[\"interval\"].push(ele[\"recommend_distribution\"][\"interval\"]);\n      });\n      setOptions({\n        xAxis: {\n          categories: categories\n        },\n        series: [{\n          name: \"區間操作\",\n          data: series[\"interval\"]\n        }, {\n          name: \"賣出\",\n          data: series[\"sell\"]\n        }, {\n          name: \"持有\",\n          data: series[\"hold\"]\n        }, {\n          name: \"買進\",\n          data: series[\"buy\"]\n        }]\n      });\n      setLoading(false);\n    }).catch(function (res) {\n      if (res.response.data === \"Session expired\") window.location.reload();\n    });\n  }, []);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Backdrop, {\n    sx: {\n      color: '#fff',\n      zIndex: function zIndex(theme) {\n        return theme.zIndex.drawer + 1;\n      }\n    },\n    open: loading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 13\n    }\n  }, \"\\u8CC7\\u6599\\u8F09\\u5165\\u4E2D\\u2003\", /*#__PURE__*/React.createElement(CircularProgress, {\n    color: \"inherit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row mx-auto py-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-8 mx-auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    className: \"display-6 text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 21\n    }\n  }, \"\\u71B1\\u9580\\u500B\\u80A1\\u7814\\u7A76\\u5831\\u544A\"), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: submit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group row py-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"startDate\",\n    className: \"col-md-3 col-form-label text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 29\n    }\n  }, \"\\u958B\\u59CB\\u65E5\\u671F:\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"date\",\n    id: \"startDate\",\n    className: \"form-control\",\n    onChange: function onChange(e) {\n      return setStartDate(e.target.value);\n    },\n    value: \"2023-01-01\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 33\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group row py-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"endDate\",\n    className: \"col-md-3 col-form-label text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 29\n    }\n  }, \"\\u7D50\\u675F\\u65E5\\u671F:\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"date\",\n    id: \"endDate\",\n    className: \"form-control\",\n    onChange: function onChange(e) {\n      return setEndDate(e.target.value);\n    },\n    value: endDate,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 33\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group row py-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"top\",\n    className: \"col-md-3 col-form-label text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 29\n    }\n  }, \"\\u71B1\\u9580\\u80A1\\u7968\\u7B46\\u6578:\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"select\", {\n    id: \"top\",\n    className: \"form-select\",\n    onChange: function onChange(e) {\n      setTop(e.target.value);\n      setOptions({\n        title: {\n          text: \"\\u71B1\\u9580\\u7814\\u7A76\\u5831\\u544ATop\".concat(e.target.value)\n        }\n      });\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    value: \"5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 37\n    }\n  }, \"5\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"10\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 37\n    }\n  }, \"10\")))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group row py-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"recommend\",\n    className: \"col-md-3 col-form-label text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 29\n    }\n  }, \"\\u6295\\u8CC7\\u5EFA\\u8B70:\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"select\", {\n    id: \"recommend\",\n    className: \"form-select\",\n    onChange: function onChange(e) {\n      return setRecommend(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    value: \"all\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 37\n    }\n  }, \"\\u5168\\u90E8\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"buy\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 37\n    }\n  }, \"\\u8CB7\\u9032\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"hold\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 37\n    }\n  }, \"\\u6301\\u6709\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"sell\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 37\n    }\n  }, \"\\u8CE3\\u51FA\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"interval\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 37\n    }\n  }, \"\\u5340\\u9593\\u64CD\\u4F5C\")))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group row py-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 253,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"type\",\n    className: \"col-md-3 col-form-label text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 29\n    }\n  }, \"\\u4E0A\\u5E02\\u6AC3:\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"select\", {\n    id: \"type\",\n    className: \"form-select\",\n    onChange: function onChange(e) {\n      return typeChangeHandler(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 256,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    value: \"all\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 257,\n      columnNumber: 37\n    }\n  }, \"\\u5168\\u90E8\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"\\u4E0A\\u5E02\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 37\n    }\n  }, \"\\u4E0A\\u5E02\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"\\u4E0A\\u6AC3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 259,\n      columnNumber: 37\n    }\n  }, \"\\u4E0A\\u6AC3\")))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group row py-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 264,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"category\",\n    className: \"col-md-3 col-form-label text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 265,\n      columnNumber: 29\n    }\n  }, \"\\u7522\\u696D\\u985E\\u5225:\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 266,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"select\", {\n    id: \"category\",\n    className: \"form-select\",\n    onChange: function onChange(e) {\n      return setCategory(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    value: \"all\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 268,\n      columnNumber: 37\n    }\n  }, \"\\u5168\\u90E8\"), categoryList.map(function (ele, idx) {\n    return /*#__PURE__*/React.createElement(\"option\", {\n      key: idx,\n      value: ele[\"class\"],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 52\n      }\n    }, ele[\"class\"]);\n  })))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group row py-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 278,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-12 text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 279,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    className: \"btn btn-primary\",\n    style: {\n      width: \"100px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 280,\n      columnNumber: 33\n    }\n  }, \"\\u641C\\u5C0B\")))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row mx-auto py-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 287,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-8 mx-auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 288,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(HighchartBarComp, {\n    options: options,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 289,\n      columnNumber: 21\n    }\n  }))));\n}\n\nexport default TopTickerComp;","map":{"version":3,"sources":["/home/cosbi/financialSite/frontend/src/component/topTickerPage/topTickerComp.js"],"names":["Backdrop","CircularProgress","React","useEffect","useState","axios","config","HighchartBarComp","TopTickerComp","Today","Date","todayDate","getFullYear","String","getMonth","padStart","getDate","startDate","setStartDate","endDate","setEndDate","top","setTop","recommend","setRecommend","category","setCategory","categoryList","setCategoryList","type","setType","loading","setLoading","chart","height","title","text","accessibility","enabled","yAxis","plotOptions","series","stacking","options","setOptions","submit","e","preventDefault","get","params","then","res","categories","data","map","ele","idx","push","xAxis","name","catch","response","window","location","reload","typeChangeHandler","value","console","log","color","zIndex","theme","drawer","target","width"],"mappings":"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","sourcesContent":["import { Backdrop, CircularProgress } from '@mui/material';\nimport React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { config } from '../../constant';\nimport HighchartBarComp from '../highchart/highchartBarComp';\n\nfunction TopTickerComp() {\n    var Today = new Date()\n    const todayDate = Today.getFullYear() + \"-\" + String(Today.getMonth()+1).padStart(2, '0') + \"-\" + String(Today.getDate()).padStart(2, '0')\n\n    const [startDate, setStartDate] = useState(\"2023-01-01\")\n    const [endDate, setEndDate] = useState(todayDate)\n    const [top, setTop] = useState(5)\n    const [recommend, setRecommend] = useState(\"all\")\n    const [category, setCategory] = useState(\"all\")\n    const [categoryList, setCategoryList] = useState([])\n    const [type, setType] = useState(\"all\")\n    const [loading, setLoading] = useState(true)\n\n    const [options, setOptions] = useState({\n        chart: {\n            type: 'bar',\n            height : 500\n        },\n        title: {\n            text: `熱門研究報告Top${top}`\n        },\n        accessibility: {\n            enabled: false\n        },\n        yAxis: {\n            title: {\n                text: '投資建議分佈'\n            }\n        },\n        plotOptions: {\n            series: {\n                stacking: 'normal',\n            },\n        }\n    })\n\n    const submit = (e) => {\n        e.preventDefault()\n\n        axios.get(config[\"rootApiIP\"] + \"/data/top_ticker\", {\n            params : {\n                \"start_date\" : startDate,\n                \"end_date\" : endDate,\n                \"top\" : top,\n                \"recommend\" : recommend,\n                \"category\" : category,\n                \"type\" : type\n            }\n        })\n        .then((res) => {\n            let categories = []\n            let series = {\n                \"buy\" : [],\n                \"sell\" : [],\n                \"hold\" : [],\n                \"interval\" : []\n            }\n\n            res.data[\"recommend_result\"].map((ele, idx) => {\n                categories.push(ele[\"stock_name\"])\n                series[\"buy\"].push(ele[\"recommend_distribution\"][\"buy\"])\n                series[\"sell\"].push(ele[\"recommend_distribution\"][\"sell\"])\n                series[\"hold\"].push(ele[\"recommend_distribution\"][\"hold\"])\n                series[\"interval\"].push(ele[\"recommend_distribution\"][\"interval\"])\n            })\n\n            setOptions({\n                xAxis: {\n                    categories : categories\n                },\n                series : [\n                    {\n                        name : \"區間操作\",\n                        data : series[\"interval\"]\n                    },\n                    {\n                        name : \"賣出\",\n                        data : series[\"sell\"]\n                    },\n                    {\n                        name : \"持有\",\n                        data : series[\"hold\"]\n                    },\n                    {\n                        name : \"買進\",\n                        data : series[\"buy\"]\n                    },\n                ]\n            })\n        })\n        .catch((res) => {\n            if(res.response.data === \"Session expired\") window.location.reload()\n        })\n    }\n\n    const typeChangeHandler = (value) => {\n        setType(value)\n        setCategory(\"all\")\n\n        axios.get(config[\"rootApiIP\"] + \"/data/ticker_category\", {\n            params : {\n                \"type\" : value\n            }\n        })\n        .then((res) => {\n            setCategoryList([])\n            setCategoryList(res.data)\n        })\n        .catch((res) => {\n            if(res.response.data === \"Session expired\") window.location.reload()\n        })\n    }\n\n    useEffect(() => {\n        axios.get(config[\"rootApiIP\"] + \"/data/ticker_category\", {\n            params : {\n                \"type\" : \"all\"\n            }\n        })\n        .then((res) => {\n            setCategoryList(res.data)\n        })\n        .catch((res) => {\n            if(res.response.data === \"Session expired\") window.location.reload()\n        })\n\n        axios.get(config[\"rootApiIP\"] + \"/data/top_ticker\", {\n            params : {\n                \"start_date\" : startDate,\n                \"end_date\" : endDate,\n                \"top\" : top,\n                \"recommend\" : recommend,\n                \"category\" : category,\n                \"type\" : type\n            }\n        })\n        .then((res) => {\n            console.log(res.data)\n            let categories = []\n            let series = {\n                \"buy\" : [],\n                \"sell\" : [],\n                \"hold\" : [],\n                \"interval\" : []\n            }\n\n            res.data[\"recommend_result\"].map((ele, idx) => {\n                categories.push(ele[\"stock_name\"])\n                series[\"buy\"].push(ele[\"recommend_distribution\"][\"buy\"])\n                series[\"sell\"].push(ele[\"recommend_distribution\"][\"sell\"])\n                series[\"hold\"].push(ele[\"recommend_distribution\"][\"hold\"])\n                series[\"interval\"].push(ele[\"recommend_distribution\"][\"interval\"])\n            })\n\n            setOptions({\n                xAxis: {\n                    categories : categories\n                },\n                series : [\n                    {\n                        name : \"區間操作\",\n                        data : series[\"interval\"]\n                    },\n                    {\n                        name : \"賣出\",\n                        data : series[\"sell\"]\n                    },\n                    {\n                        name : \"持有\",\n                        data : series[\"hold\"]\n                    },\n                    {\n                        name : \"買進\",\n                        data : series[\"buy\"]\n                    },\n                ]\n            })\n\n            setLoading(false)\n        })\n        .catch((res) => {\n            if(res.response.data === \"Session expired\") window.location.reload()\n        })\n    }, [])\n\n    return (\n        <>\n            <Backdrop\n                sx = {{ color: '#fff', zIndex: (theme) => theme.zIndex.drawer + 1 }}\n                open = { loading }\n            >\n                資料載入中&emsp;\n                <CircularProgress color = \"inherit\" />\n            </Backdrop>\n\n            <div className = 'row mx-auto py-3'>\n                <div className = 'col-md-8 mx-auto'>\n                    <h3 className = \"display-6 text-center\">熱門個股研究報告</h3>\n\n                    <form onSubmit = { submit }>\n                        <div className = 'form-group row py-3'>\n                            <label htmlFor = \"startDate\" className = \"col-md-3 col-form-label text-center\">開始日期:</label>\n                            <div className = 'col-md-3'>\n                                <input type = \"date\" id = \"startDate\" className = \"form-control\" \n                                    onChange = {e => setStartDate(e.target.value)} value = { \"2023-01-01\" }></input>\n                            </div>\n                        </div>\n\n                        <div className = 'form-group row py-3'>\n                            <label htmlFor = \"endDate\" className = \"col-md-3 col-form-label text-center\">結束日期:</label>\n                            <div className = 'col-md-3'>\n                                <input type = \"date\" id = \"endDate\" className = \"form-control\" \n                                    onChange = {e => setEndDate(e.target.value)} value = { endDate }></input>\n                            </div>\n                        </div>\n\n                        <div className = 'form-group row py-3'>\n                            <label htmlFor = \"top\" className = \"col-md-3 col-form-label text-center\">熱門股票筆數:</label>\n                            <div className = 'col-md-3'>\n                                <select id = \"top\" className = \"form-select\" onChange = {e => {\n                                    setTop(e.target.value)\n                                    setOptions({\n                                        title: {\n                                            text: `熱門研究報告Top${e.target.value}`\n                                        },\n                                    })\n                                }}>\n                                    <option value = \"5\">5</option>\n                                    <option value = \"10\">10</option>\n                                </select>\n                            </div>\n                        </div>\n\n                        <div className = 'form-group row py-3'>\n                            <label htmlFor = \"recommend\" className = \"col-md-3 col-form-label text-center\">投資建議:</label>\n                            <div className = 'col-md-3'>\n                                <select id = \"recommend\" className = \"form-select\" onChange = {e => setRecommend(e.target.value)}>\n                                    <option value = \"all\">全部</option>\n                                    <option value = \"buy\">買進</option>\n                                    <option value = \"hold\">持有</option>\n                                    <option value = \"sell\">賣出</option>\n                                    <option value = \"interval\">區間操作</option>\n                                </select>\n                            </div>\n                        </div>\n\n                        <div className = 'form-group row py-3'>\n                            <label htmlFor = \"type\" className = \"col-md-3 col-form-label text-center\">上市櫃:</label>\n                            <div className = 'col-md-3'>\n                                <select id = \"type\" className = \"form-select\" onChange = {e => typeChangeHandler(e.target.value)}>\n                                    <option value = \"all\">全部</option>\n                                    <option value = \"上市\">上市</option>\n                                    <option value = \"上櫃\">上櫃</option>\n                                </select>\n                            </div>\n                        </div>\n\n                        <div className = 'form-group row py-3'>\n                            <label htmlFor = \"category\" className = \"col-md-3 col-form-label text-center\">產業類別:</label>\n                            <div className = 'col-md-3'>\n                                <select id = \"category\" className = \"form-select\" onChange = {e => setCategory(e.target.value)}>\n                                    <option value = \"all\">全部</option>\n                                    {\n                                        categoryList.map(function(ele, idx){\n                                            return <option key = {idx} value = {ele[\"class\"]}>{ele[\"class\"]}</option>\n                                        })\n                                    }\n                                </select>\n                            </div>\n                        </div>\n\n                        <div className = 'form-group row py-3'>\n                            <div className = 'col-md-12 text-center'>\n                                <button type = \"submit\" className = \"btn btn-primary\" style = {{ width : \"100px\" }}>搜尋</button>\n                            </div>\n                        </div>\n                    </form>\n                </div>\n            </div>\n\n            <div className = 'row mx-auto py-3'>\n                <div className = 'col-md-8 mx-auto'>\n                    <HighchartBarComp options = { options }/>\n                </div>\n            </div>\n        </>\n    );\n}\n\nexport default TopTickerComp;"]},"metadata":{},"sourceType":"module"}