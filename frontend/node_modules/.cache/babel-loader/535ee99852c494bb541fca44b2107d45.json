{"ast":null,"code":"import _regeneratorRuntime from \"/home/cosbi/financialSite/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/cosbi/financialSite/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/home/cosbi/financialSite/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/cosbi/financialSite/frontend/src/component/calendarPage/calendarComp.js\";\nimport React, { useEffect, useState } from 'react';\nimport FullCalendar from '@fullcalendar/react';\nimport dayGridPlugin from '@fullcalendar/daygrid';\nimport axios from 'axios';\nimport { rootApiIP } from '../../constant';\nimport { DataGrid, GridToolbar } from '@mui/x-data-grid';\nimport { columns4 } from '../column/column';\nimport { useNavigate } from 'react-router-dom';\n\nfunction CalendarComp() {\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      data = _useState2[0],\n      setData = _useState2[1];\n\n  var _useState3 = useState(new Date().getFullYear()),\n      _useState4 = _slicedToArray(_useState3, 2),\n      year1 = _useState4[0],\n      setYear1 = _useState4[1];\n\n  var _useState5 = useState(new Date().getMonth() + 1),\n      _useState6 = _slicedToArray(_useState5, 2),\n      month1 = _useState6[0],\n      setMonth1 = _useState6[1];\n\n  var _useState7 = useState(0),\n      _useState8 = _slicedToArray(_useState7, 2),\n      page = _useState8[0],\n      setPage = _useState8[1];\n\n  var _useState9 = useState(10),\n      _useState10 = _slicedToArray(_useState9, 2),\n      pageSize = _useState10[0],\n      setPageSize = _useState10[1];\n\n  var nav = useNavigate();\n  useEffect(function () {\n    axios.post(rootApiIP + \"/data/calenderData\", {\n      \"year\": year1,\n      \"month\": month1\n    }).then(function (res) {\n      setPage(0);\n      setData(res.data);\n    }).catch(function (res) {\n      if (res.response.data === \"Session expired\") window.location.reload();\n    });\n  }, [year1, month1]);\n\n  function clickEvent(info) {\n    nav(\"http://140.116.214.154:8080/database\");\n  }\n\n  function getCalendarData(_x, _x2) {\n    return _getCalendarData.apply(this, arguments);\n  }\n\n  function _getCalendarData() {\n    _getCalendarData = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(fetchInfo, successCallback) {\n      var year, month, response;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              year = new Date().getFullYear();\n              month = new Date().getMonth() + 1;\n\n              if (fetchInfo) {\n                year = new Date(fetchInfo.start).getFullYear();\n                month = new Date(fetchInfo.start).getMonth() + 1;\n              }\n\n              setYear1(year);\n              setMonth1(month);\n              _context.next = 8;\n              return axios.post(rootApiIP + \"/data/calender\", {\n                \"year\": year,\n                \"month\": month\n              });\n\n            case 8:\n              response = _context.sent;\n              successCallback(response.data.map(function (event) {\n                return {\n                  title: event.title,\n                  start: event.date\n                };\n              }));\n              _context.next = 15;\n              break;\n\n            case 12:\n              _context.prev = 12;\n              _context.t0 = _context[\"catch\"](0);\n              if (_context.t0.response.data === \"Session expired\") window.location.reload();\n\n            case 15:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 12]]);\n    }));\n    return _getCalendarData.apply(this, arguments);\n  }\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row mt-3 mx-auto text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 17\n    }\n  }, \"\\u6CD5\\u8AAA\\u6703\\u884C\\u4E8B\\u66C6\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row mt-3 mx-auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-6 mx-auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(FullCalendar, {\n    height: 600,\n    plugins: [dayGridPlugin],\n    initialView: \"dayGridMonth\",\n    events: function events(fetchInfo, successCallback, failureCallback) {\n      return getCalendarData(fetchInfo, successCallback, failureCallback);\n    },\n    dayMaxEventRows: 2,\n    eventClick: clickEvent,\n    eventMouseEnter: function eventMouseEnter(info) {\n      return info.el.style.cursor = \"pointer\";\n    },\n    showNonCurrentDates: false,\n    fixedWeekCount: false,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 21\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row mt-5 mx-auto\",\n    style: {\n      height: \"400px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(DataGrid, {\n    columns: columns4,\n    rows: data,\n    page: page,\n    onPageChange: function onPageChange(newPage) {\n      return setPage(newPage);\n    },\n    pageSize: pageSize,\n    onPageSizeChange: function onPageSizeChange(newPageSize) {\n      return setPageSize(newPageSize);\n    },\n    rowsPerPageOptions: [5, 10, 20],\n    getRowId: function getRowId(row) {\n      return row.ID;\n    },\n    components: {\n      Toolbar: GridToolbar\n    },\n    componentsProps: {\n      toolbar: {\n        showQuickFilter: true\n      }\n    },\n    pagination: true,\n    disableColumnMenu: true,\n    disableColumnSelector: true,\n    disableDensitySelector: true,\n    disableColumnFilter: true,\n    disableSelectionOnClick: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 17\n    }\n  })));\n}\n\nexport default CalendarComp;","map":{"version":3,"sources":["/home/cosbi/financialSite/frontend/src/component/calendarPage/calendarComp.js"],"names":["React","useEffect","useState","FullCalendar","dayGridPlugin","axios","rootApiIP","DataGrid","GridToolbar","columns4","useNavigate","CalendarComp","data","setData","Date","getFullYear","year1","setYear1","getMonth","month1","setMonth1","page","setPage","pageSize","setPageSize","nav","post","then","res","catch","response","window","location","reload","clickEvent","info","getCalendarData","fetchInfo","successCallback","year","month","start","map","event","title","date","failureCallback","el","style","cursor","height","newPage","newPageSize","row","ID","Toolbar","toolbar","showQuickFilter"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport FullCalendar from '@fullcalendar/react';\nimport dayGridPlugin from '@fullcalendar/daygrid';\nimport axios from 'axios';\nimport { rootApiIP } from '../../constant'\nimport { DataGrid, GridToolbar } from '@mui/x-data-grid';\nimport { columns4 } from '../column/column';\nimport { useNavigate } from 'react-router-dom';\n\nfunction CalendarComp() {\n    const [data, setData] = useState([])\n    const [year1, setYear1] = useState(new Date().getFullYear())\n    const [month1, setMonth1] = useState(new Date().getMonth() + 1)\n    const [page, setPage] = useState(0);\n    const [pageSize, setPageSize] = useState(10);\n    const nav = useNavigate()\n\n    useEffect(() => {\n        axios.post(rootApiIP + \"/data/calenderData\", { \"year\" : year1, \"month\" : month1 })\n        .then(res => {\n            setPage(0)\n            setData(res.data)\n        }).catch(res => {\n            if(res.response.data === \"Session expired\") window.location.reload()\n        })\n    }, [year1, month1])\n\n    function clickEvent(info){\n        nav(\"http://140.116.214.154:8080/database\")\n    }\n\n    async function getCalendarData(fetchInfo, successCallback) {\n\n        try {\n            let year = new Date().getFullYear();\n            let month = new Date().getMonth() + 1;\n        \n            if (fetchInfo) {\n                year = new Date(fetchInfo.start).getFullYear();\n                month = new Date(fetchInfo.start).getMonth() + 1;\n            }\n\n            setYear1(year)\n            setMonth1(month)\n\n            const response = await axios.post(rootApiIP + \"/data/calender\", { \"year\" : year, \"month\" : month })\n\n            successCallback(\n                response.data.map(event => {\n                    return ({\n                        title: event.title,\n                        start: event.date,\n                    });\n                })\n            );\n        } catch (error) {\n            if(error.response.data === \"Session expired\") window.location.reload()\n        }\n    }\n\n    return (\n        <>\n            <div className = 'row mt-3 mx-auto text-center'>\n                <h1>法說會行事曆</h1>\n            </div>\n\n            <div className = 'row mt-3 mx-auto'>\n                <div className = 'col-md-6 mx-auto'>\n                    <FullCalendar\n                        height = { 600 }\n                        plugins={[ dayGridPlugin ]}\n                        initialView = \"dayGridMonth\"\n                        events = { (fetchInfo, successCallback, failureCallback) => getCalendarData(fetchInfo, successCallback, failureCallback) }\n                        dayMaxEventRows = { 2 }\n                        eventClick = { clickEvent }\n                        eventMouseEnter = { info => info.el.style.cursor = \"pointer\" }\n                        showNonCurrentDates = { false }\n                        fixedWeekCount = { false }\n                    />\n                </div>\n            </div>\n\n            <div className = 'row mt-5 mx-auto' style = {{height : \"400px\"}}>\n                <DataGrid\n                    columns = { columns4 }\n                    rows = { data }\n                    page = { page }\n                    onPageChange={(newPage) => setPage(newPage)}\n                    pageSize = { pageSize }\n                    onPageSizeChange={ (newPageSize) => setPageSize(newPageSize) }\n                    rowsPerPageOptions = {[5, 10, 20]}\n                    getRowId = { row => row.ID }\n                    components = {{ Toolbar: GridToolbar }}\n                    componentsProps = {{ toolbar: { showQuickFilter: true },}}\n                    pagination\n                    disableColumnMenu\n                    disableColumnSelector\n                    disableDensitySelector\n                    disableColumnFilter\n                    disableSelectionOnClick = { true }\n                />\n            </div>\n        </>\n    );\n}\n\nexport default CalendarComp;"]},"metadata":{},"sourceType":"module"}