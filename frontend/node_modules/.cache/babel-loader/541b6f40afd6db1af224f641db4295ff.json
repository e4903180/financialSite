{"ast":null,"code":"import _slicedToArray from \"/home/cosbi/financialSite/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/cosbi/financialSite/frontend/src/component/tickerSearchComp.js\";\nimport axios from 'axios';\nimport React, { useEffect, useState } from 'react';\nimport { AsyncTypeahead } from 'react-bootstrap-typeahead';\nimport { rootApiIP } from '../constant';\n\nfunction TickerSearchComp(props) {\n  var _this = this;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      isLoading = _useState2[0],\n      setIsLoading = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      options = _useState4[0],\n      setOptions = _useState4[1];\n\n  var _useState5 = useState(\"\"),\n      _useState6 = _slicedToArray(_useState5, 2),\n      ticker = _useState6[0],\n      setTicker = _useState6[1];\n\n  var handleSearch = function handleSearch(pattern) {\n    setIsLoading(true);\n    axios.post(rootApiIP + \"/data/ticker_search\", {\n      \"pattern\": pattern\n    }).then(function (res) {\n      setOptions(res.data);\n      setIsLoading(false);\n    }).catch(function (res) {\n      if (res.response.data === \"Session expired\") window.location.reload();\n    });\n  };\n\n  useEffect(function () {\n    props.setTicker(ticker);\n  }, [ticker]);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(AsyncTypeahead, {\n    id: \"ticker\",\n    isLoading: isLoading,\n    labelKey: \"stock_name\",\n    onSearch: handleSearch,\n    options: options,\n    placeholder: \"\\u641C\\u5C0B\\u80A1\\u7968\\u4EE3\\u865F\\u53CA\\u540D\\u7A31\",\n    renderMenuItemChildren: function renderMenuItemChildren(option) {\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"span\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 42,\n          columnNumber: 25\n        }\n      }, option.stock_name));\n    },\n    onChange: function onChange(e) {\n      return setTicker(e.target.value);\n    },\n    defaultInputValue: props.init,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 13\n    }\n  }));\n}\n\nexport default TickerSearchComp;","map":{"version":3,"sources":["/home/cosbi/financialSite/frontend/src/component/tickerSearchComp.js"],"names":["axios","React","useEffect","useState","AsyncTypeahead","rootApiIP","TickerSearchComp","props","isLoading","setIsLoading","options","setOptions","ticker","setTicker","handleSearch","pattern","post","then","res","data","catch","response","window","location","reload","option","stock_name","e","target","value","init"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,SAASC,cAAT,QAA+B,2BAA/B;AACA,SAASC,SAAT,QAA0B,aAA1B;;AAEA,SAASC,gBAAT,CAA0BC,KAA1B,EAAiC;AAAA;;AAAA,kBACKJ,QAAQ,CAAC,KAAD,CADb;AAAA;AAAA,MACtBK,SADsB;AAAA,MACXC,YADW;;AAAA,mBAECN,QAAQ,CAAC,EAAD,CAFT;AAAA;AAAA,MAEtBO,OAFsB;AAAA,MAEbC,UAFa;;AAAA,mBAGDR,QAAQ,CAAC,EAAD,CAHP;AAAA;AAAA,MAGtBS,MAHsB;AAAA,MAGdC,SAHc;;AAK7B,MAAMC,YAAY,GAAG,SAAfA,YAAe,CAACC,OAAD,EAAa;AAC9BN,IAAAA,YAAY,CAAC,IAAD,CAAZ;AAEAT,IAAAA,KAAK,CAACgB,IAAN,CAAWX,SAAS,GAAG,qBAAvB,EAA8C;AAC1C,iBAAYU;AAD8B,KAA9C,EAGCE,IAHD,CAGM,UAACC,GAAD,EAAS;AACXP,MAAAA,UAAU,CAACO,GAAG,CAACC,IAAL,CAAV;AACAV,MAAAA,YAAY,CAAC,KAAD,CAAZ;AACH,KAND,EAOCW,KAPD,CAOO,UAACF,GAAD,EAAS;AACZ,UAAGA,GAAG,CAACG,QAAJ,CAAaF,IAAb,KAAsB,iBAAzB,EAA4CG,MAAM,CAACC,QAAP,CAAgBC,MAAhB;AAC/C,KATD;AAUH,GAbD;;AAeAtB,EAAAA,SAAS,CAAC,YAAM;AACZK,IAAAA,KAAK,CAACM,SAAN,CAAgBD,MAAhB;AACH,GAFQ,EAEN,CAACA,MAAD,CAFM,CAAT;AAIA,sBACI,uDACI,oBAAC,cAAD;AACI,IAAA,EAAE,EAAG,QADT;AAEI,IAAA,SAAS,EAAKJ,SAFlB;AAGI,IAAA,QAAQ,EAAG,YAHf;AAII,IAAA,QAAQ,EAAKM,YAJjB;AAKI,IAAA,OAAO,EAAKJ,OALhB;AAMI,IAAA,WAAW,EAAG,wDANlB;AAQI,IAAA,sBAAsB,EAAE,gCAACe,MAAD;AAAA,0BACpB,uDACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAOA,MAAM,CAACC,UAAd,CADJ,CADoB;AAAA,KAR5B;AAcI,IAAA,QAAQ,EAAI,kBAACC,CAAD;AAAA,aAAOd,SAAS,CAACc,CAAC,CAACC,MAAF,CAASC,KAAV,CAAhB;AAAA,KAdhB;AAeI,IAAA,iBAAiB,EAAItB,KAAK,CAACuB,IAf/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,CADJ;AAqBH;;AAED,eAAexB,gBAAf","sourcesContent":["import axios from 'axios';\nimport React, { useEffect, useState } from 'react';\nimport { AsyncTypeahead } from 'react-bootstrap-typeahead';\nimport { rootApiIP } from '../constant';\n\nfunction TickerSearchComp(props) {\n    const [isLoading, setIsLoading] = useState(false);\n    const [options, setOptions] = useState([]);\n    const [ticker, setTicker] = useState(\"\");\n\n    const handleSearch = (pattern) => {\n        setIsLoading(true);\n        \n        axios.post(rootApiIP + \"/data/ticker_search\", {\n            \"pattern\" : pattern\n        })\n        .then((res) => {\n            setOptions(res.data);\n            setIsLoading(false);\n        })\n        .catch((res) => {\n            if(res.response.data === \"Session expired\") window.location.reload()\n        })\n    };\n\n    useEffect(() => {\n        props.setTicker(ticker)\n    }, [ticker])\n\n    return (\n        <>\n            <AsyncTypeahead\n                id = \"ticker\"\n                isLoading = { isLoading }\n                labelKey = \"stock_name\"\n                onSearch = { handleSearch }\n                options = { options }\n                placeholder = \"搜尋股票代號及名稱\"\n\n                renderMenuItemChildren={(option) => (\n                    <>\n                        <span>{option.stock_name}</span>\n                    </>\n                )}\n                \n                onChange = {(e) => setTicker(e.target.value)}\n                defaultInputValue = {props.init}\n            />\n        </>\n    );\n}\n\nexport default TickerSearchComp;"]},"metadata":{},"sourceType":"module"}