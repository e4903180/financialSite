{"ast":null,"code":"import _regeneratorRuntime from \"/home/cosbi/financialSite/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/cosbi/financialSite/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/home/cosbi/financialSite/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/cosbi/financialSite/frontend/src/component/calendarPage/calendarComp.js\";\nimport React, { useEffect, useState } from 'react';\nimport FullCalendar from '@fullcalendar/react';\nimport dayGridPlugin from '@fullcalendar/daygrid';\nimport axios from 'axios';\nimport { rootApiIP } from '../../constant';\n\nfunction CalendarComp() {\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      data = _useState2[0],\n      setData = _useState2[1];\n\n  useEffect(function () {\n    axios.get(rootApiIP + \"/data/calender\").then(function (res) {\n      setData(res.data);\n    }).catch(function (res) {});\n  }, []);\n\n  function clickEvent(info) {\n    window.open(\"http://140.116.214.154:8080/allSearch/\" + info.event.title.slice(0, 4));\n  }\n\n  function getCalendarData(_x, _x2) {\n    return _getCalendarData.apply(this, arguments);\n  }\n\n  function _getCalendarData() {\n    _getCalendarData = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(fetchInfo, successCallback) {\n      var year, month, response;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              year = new Date().getFullYear();\n              month = new Date().getMonth() + 1;\n\n              if (fetchInfo) {\n                year = new Date(fetchInfo.start).getFullYear();\n                month = new Date(fetchInfo.start).getMonth() + 1;\n              }\n\n              _context.next = 6;\n              return axios.get(rootApiIP + \"/data/calender\");\n\n            case 6:\n              response = _context.sent;\n              successCallback(response.data.appointments.map(function (event) {\n                return {\n                  id: event.id,\n                  title: event.name,\n                  start: event.datetime_start,\n                  end: event.datetime_finish\n                };\n              }));\n              _context.next = 13;\n              break;\n\n            case 10:\n              _context.prev = 10;\n              _context.t0 = _context[\"catch\"](0);\n              console.log(_context.t0);\n\n            case 13:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 10]]);\n    }));\n    return _getCalendarData.apply(this, arguments);\n  }\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row mt-3 mx-auto text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 17\n    }\n  }, \"\\u6CD5\\u8AAA\\u6703\\u884C\\u4E8B\\u66C6\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row mt-3 mx-auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-6 mx-auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(FullCalendar, {\n    height: 600,\n    plugins: [dayGridPlugin],\n    initialView: \"dayGridMonth\",\n    events: function events(fetchInfo, successCallback, failureCallback) {\n      return getCalendarData(fetchInfo, successCallback, failureCallback);\n    },\n    dayMaxEventRows: 2,\n    eventClick: clickEvent,\n    eventMouseEnter: function eventMouseEnter(info) {\n      return info.el.style.cursor = \"pointer\";\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 21\n    }\n  }))));\n}\n\nexport default CalendarComp;","map":{"version":3,"sources":["/home/cosbi/financialSite/frontend/src/component/calendarPage/calendarComp.js"],"names":["React","useEffect","useState","FullCalendar","dayGridPlugin","axios","rootApiIP","CalendarComp","data","setData","get","then","res","catch","clickEvent","info","window","open","event","title","slice","getCalendarData","fetchInfo","successCallback","year","Date","getFullYear","month","getMonth","start","response","appointments","map","id","name","datetime_start","end","datetime_finish","console","log","failureCallback","el","style","cursor"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport FullCalendar from '@fullcalendar/react';\nimport dayGridPlugin from '@fullcalendar/daygrid';\nimport axios from 'axios';\nimport { rootApiIP } from '../../constant'\n\nfunction CalendarComp() {\n    const [data, setData] = useState([])\n\n    useEffect(() => {\n        axios.get( rootApiIP + \"/data/calender\")\n        .then(res => {\n            setData(res.data);\n        }).catch(res => {\n        })\n    }, [])\n\n    function clickEvent(info){\n        window.open(\"http://140.116.214.154:8080/allSearch/\" + info.event.title.slice(0, 4))\n    }\n\n    async function getCalendarData(fetchInfo, successCallback) {\n        try {\n      \n        let year = new Date().getFullYear();\n        let month = new Date().getMonth() + 1;\n      \n        if (fetchInfo) {\n          year = new Date(fetchInfo.start).getFullYear();\n          month = new Date(fetchInfo.start).getMonth() + 1;\n        }\n      \n        const response = await axios.get(rootApiIP + \"/data/calender\")\n      \n        successCallback(\n          response.data.appointments.map(event => {\n            return {\n              id: event.id,\n              title: event.name,\n              start: event.datetime_start,\n              end: event.datetime_finish,\n            };\n          })\n        );\n        } catch (error) {\n          console.log(error);\n        }\n      }\n\n    return (\n        <>\n            <div className = 'row mt-3 mx-auto text-center'>\n                <h1>法說會行事曆</h1>\n            </div>\n\n            <div className = 'row mt-3 mx-auto'>\n                <div className = 'col-md-6 mx-auto'>\n                    <FullCalendar\n                        height = { 600 }\n                        plugins={[ dayGridPlugin ]}\n                        initialView = \"dayGridMonth\"\n                        events = { (fetchInfo, successCallback, failureCallback) => getCalendarData(fetchInfo, successCallback, failureCallback) }\n                        dayMaxEventRows = { 2 }\n                        eventClick = { clickEvent }\n                        eventMouseEnter = { info => info.el.style.cursor = \"pointer\" }\n                    />\n                </div>\n            </div>\n        </>\n    );\n}\n\nexport default CalendarComp;"]},"metadata":{},"sourceType":"module"}