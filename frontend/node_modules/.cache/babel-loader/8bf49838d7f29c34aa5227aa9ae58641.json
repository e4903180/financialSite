{"ast":null,"code":"import _slicedToArray from \"/home/cosbi/financialSite/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/cosbi/financialSite/frontend/src/component/tickerSearchComp.js\";\nimport axios from 'axios';\nimport React, { useState } from 'react';\nimport { AsyncTypeahead } from 'react-bootstrap-typeahead';\n\nfunction TickerSearchComp(props) {\n  var _this = this;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      isLoading = _useState2[0],\n      setIsLoading = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      options = _useState4[0],\n      setOptions = _useState4[1];\n\n  var handleSearch = function handleSearch(pattern) {\n    setIsLoading(true);\n    props.setTicker(pattern);\n    axios.post(config[\"rootApiIP\"] + \"/data/ticker_search\", {\n      \"pattern\": pattern\n    }).then(function (res) {\n      setOptions(res.data);\n      setIsLoading(false);\n    }).catch(function (res) {\n      if (res.response.data === \"Session expired\") window.location.reload();\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(AsyncTypeahead, {\n    id: \"ticker\",\n    ref: props.reference,\n    isLoading: isLoading,\n    labelKey: \"stock_name\",\n    onSearch: handleSearch,\n    options: options,\n    placeholder: \"\\u641C\\u5C0B\\u80A1\\u7968\\u4EE3\\u865F\\u53CA\\u540D\\u7A31\",\n    minLength: 3,\n    renderMenuItemChildren: function renderMenuItemChildren(option) {\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"span\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 39,\n          columnNumber: 25\n        }\n      }, option.stock_name));\n    },\n    onChange: function onChange(e) {\n      if (e[0]) {\n        props.setTicker(e[0][\"stock_name\"]);\n      } else {\n        props.setTicker(\"\");\n      }\n    },\n    defaultInputValue: props.init,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 27,\n      columnNumber: 13\n    }\n  }));\n}\n\nexport default TickerSearchComp;","map":{"version":3,"sources":["/home/cosbi/financialSite/frontend/src/component/tickerSearchComp.js"],"names":["axios","React","useState","AsyncTypeahead","TickerSearchComp","props","isLoading","setIsLoading","options","setOptions","handleSearch","pattern","setTicker","post","config","then","res","data","catch","response","window","location","reload","reference","option","stock_name","e","init"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,SAASC,cAAT,QAA+B,2BAA/B;;AAEA,SAASC,gBAAT,CAA0BC,KAA1B,EAAiC;AAAA;;AAAA,kBACKH,QAAQ,CAAC,KAAD,CADb;AAAA;AAAA,MACtBI,SADsB;AAAA,MACXC,YADW;;AAAA,mBAECL,QAAQ,CAAC,EAAD,CAFT;AAAA;AAAA,MAEtBM,OAFsB;AAAA,MAEbC,UAFa;;AAI7B,MAAMC,YAAY,GAAG,SAAfA,YAAe,CAACC,OAAD,EAAa;AAC9BJ,IAAAA,YAAY,CAAC,IAAD,CAAZ;AACAF,IAAAA,KAAK,CAACO,SAAN,CAAgBD,OAAhB;AAEAX,IAAAA,KAAK,CAACa,IAAN,CAAWC,MAAM,CAAC,WAAD,CAAN,GAAsB,qBAAjC,EAAwD;AACpD,iBAAYH;AADwC,KAAxD,EAGCI,IAHD,CAGM,UAACC,GAAD,EAAS;AACXP,MAAAA,UAAU,CAACO,GAAG,CAACC,IAAL,CAAV;AACAV,MAAAA,YAAY,CAAC,KAAD,CAAZ;AACH,KAND,EAOCW,KAPD,CAOO,UAACF,GAAD,EAAS;AACZ,UAAGA,GAAG,CAACG,QAAJ,CAAaF,IAAb,KAAsB,iBAAzB,EAA4CG,MAAM,CAACC,QAAP,CAAgBC,MAAhB;AAC/C,KATD;AAUH,GAdD;;AAgBA,sBACI,uDACI,oBAAC,cAAD;AACI,IAAA,EAAE,EAAG,QADT;AAEI,IAAA,GAAG,EAAKjB,KAAK,CAACkB,SAFlB;AAGI,IAAA,SAAS,EAAKjB,SAHlB;AAII,IAAA,QAAQ,EAAG,YAJf;AAKI,IAAA,QAAQ,EAAKI,YALjB;AAMI,IAAA,OAAO,EAAKF,OANhB;AAOI,IAAA,WAAW,EAAG,wDAPlB;AAQI,IAAA,SAAS,EAAI,CARjB;AAUI,IAAA,sBAAsB,EAAE,gCAACgB,MAAD;AAAA,0BACpB,uDACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAOA,MAAM,CAACC,UAAd,CADJ,CADoB;AAAA,KAV5B;AAgBI,IAAA,QAAQ,EAAI,kBAACC,CAAD,EAAO;AACf,UAAGA,CAAC,CAAC,CAAD,CAAJ,EAAQ;AACJrB,QAAAA,KAAK,CAACO,SAAN,CAAgBc,CAAC,CAAC,CAAD,CAAD,CAAK,YAAL,CAAhB;AACH,OAFD,MAEK;AACDrB,QAAAA,KAAK,CAACO,SAAN,CAAgB,EAAhB;AACH;AACJ,KAtBL;AAwBI,IAAA,iBAAiB,EAAIP,KAAK,CAACsB,IAxB/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,CADJ;AA8BH;;AAED,eAAevB,gBAAf","sourcesContent":["import axios from 'axios';\nimport React, { useState } from 'react';\nimport { AsyncTypeahead } from 'react-bootstrap-typeahead';\n\nfunction TickerSearchComp(props) {\n    const [isLoading, setIsLoading] = useState(false);\n    const [options, setOptions] = useState([]);\n\n    const handleSearch = (pattern) => {\n        setIsLoading(true);\n        props.setTicker(pattern)\n        \n        axios.post(config[\"rootApiIP\"] + \"/data/ticker_search\", {\n            \"pattern\" : pattern\n        })\n        .then((res) => {\n            setOptions(res.data);\n            setIsLoading(false);\n        })\n        .catch((res) => {\n            if(res.response.data === \"Session expired\") window.location.reload()\n        })\n    };\n\n    return (\n        <>\n            <AsyncTypeahead\n                id = \"ticker\"\n                ref = { props.reference }\n                isLoading = { isLoading }\n                labelKey = \"stock_name\"\n                onSearch = { handleSearch }\n                options = { options }\n                placeholder = \"搜尋股票代號及名稱\"\n                minLength = {3}\n\n                renderMenuItemChildren={(option) => (\n                    <>\n                        <span>{option.stock_name}</span>\n                    </>\n                )}\n                \n                onChange = {(e) => {\n                    if(e[0]){\n                        props.setTicker(e[0][\"stock_name\"])\n                    }else{\n                        props.setTicker(\"\")\n                    }\n                }}\n\n                defaultInputValue = {props.init}\n            />\n        </>\n    );\n}\n\nexport default TickerSearchComp;"]},"metadata":{},"sourceType":"module"}