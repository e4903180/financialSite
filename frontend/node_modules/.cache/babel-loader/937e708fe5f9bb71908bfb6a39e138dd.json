{"ast":null,"code":"import _slicedToArray from \"/home/cosbi/financialSite/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/cosbi/financialSite/frontend/src/component/newsPage/newsComp.js\";\nimport { Backdrop, Button, CircularProgress, List, ListItemButton, ListItemText } from '@mui/material';\nimport { DataGrid, GridToolbar } from '@mui/x-data-grid';\nimport axios from 'axios';\nimport React, { useEffect, useState } from 'react';\nimport { rootApiIP } from '../../constant';\nimport { columns_news, columns_statementdog } from '../column/column';\nimport NewsItem from './newsItem';\nimport StatementdogItem from './statementdogItem';\n\nfunction NewsComp() {\n  var _this = this;\n\n  var Today = new Date();\n  var todayDate = Today.getFullYear() + \"-\" + String(Today.getMonth() + 1).padStart(2, '0') + \"-\" + String(Today.getDate()).padStart(2, '0');\n\n  var _useState = useState(\"news\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      type = _useState2[0],\n      setType = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      loading = _useState4[0],\n      setLoading = _useState4[1];\n\n  var _useState5 = useState([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      data0 = _useState6[0],\n      setData0 = _useState6[1];\n\n  var _useState7 = useState(0),\n      _useState8 = _slicedToArray(_useState7, 2),\n      page0 = _useState8[0],\n      setPage0 = _useState8[1];\n\n  var _useState9 = useState(10),\n      _useState10 = _slicedToArray(_useState9, 2),\n      pageSize0 = _useState10[0],\n      setPageSize0 = _useState10[1];\n\n  var _useState11 = useState([]),\n      _useState12 = _slicedToArray(_useState11, 2),\n      data1 = _useState12[0],\n      setData1 = _useState12[1];\n\n  var _useState13 = useState(0),\n      _useState14 = _slicedToArray(_useState13, 2),\n      page1 = _useState14[0],\n      setPage1 = _useState14[1];\n\n  var _useState15 = useState(10),\n      _useState16 = _slicedToArray(_useState15, 2),\n      pageSize1 = _useState16[0],\n      setPageSize1 = _useState16[1];\n\n  var _useState17 = useState([]),\n      _useState18 = _slicedToArray(_useState17, 2),\n      dataNews = _useState18[0],\n      setDataNews = _useState18[1];\n\n  var _useState19 = useState([]),\n      _useState20 = _slicedToArray(_useState19, 2),\n      dataStatementdog = _useState20[0],\n      setDataStatementdog = _useState20[1];\n\n  var columns_summary_news = [{\n    field: \"category\",\n    headerName: \"新聞類別\",\n    flex: 1,\n    headerAlign: 'center',\n    align: 'center'\n  }, {\n    field: \"todayQuantity\",\n    headerName: todayDate + \"新聞數量\",\n    flex: 1,\n    headerAlign: 'center',\n    align: 'center',\n    renderCell: function renderCell(rowData) {\n      return /*#__PURE__*/React.createElement(Button, {\n        variant: \"text\",\n        onClick: function onClick() {\n          return buttonTodayHandle(rowData[\"row\"][\"category\"]);\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 30,\n          columnNumber: 24\n        }\n      }, rowData.value);\n    }\n  }, {\n    field: \"pastQuantity\",\n    headerName: todayDate + \"前新聞數量\",\n    flex: 1,\n    headerAlign: 'center',\n    align: 'center',\n    renderCell: function renderCell(rowData) {\n      return /*#__PURE__*/React.createElement(Button, {\n        variant: \"text\",\n        onClick: function onClick() {\n          return buttonPastHandle(rowData[\"row\"][\"category\"]);\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 33,\n          columnNumber: 24\n        }\n      }, rowData.value);\n    }\n  }];\n  var columns_summary_statementdog = [{\n    field: \"category\",\n    headerName: \"新聞類別\",\n    flex: 1,\n    headerAlign: 'center',\n    align: 'center'\n  }, {\n    field: \"todayQuantity\",\n    headerName: todayDate + \"新聞數量\",\n    flex: 1,\n    headerAlign: 'center',\n    align: 'center',\n    renderCell: function renderCell(rowData) {\n      return /*#__PURE__*/React.createElement(Button, {\n        variant: \"text\",\n        onClick: function onClick() {\n          return buttonTodayHandle(rowData[\"row\"][\"category\"]);\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 40,\n          columnNumber: 24\n        }\n      }, rowData.value);\n    }\n  }, {\n    field: \"pastQuantity\",\n    headerName: todayDate + \"前新聞數量\",\n    flex: 1,\n    headerAlign: 'center',\n    align: 'center',\n    renderCell: function renderCell(rowData) {\n      return /*#__PURE__*/React.createElement(Button, {\n        variant: \"text\",\n        onClick: function onClick() {\n          return buttonPastHandle(rowData[\"row\"][\"category\"]);\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 43,\n          columnNumber: 24\n        }\n      }, rowData.value);\n    }\n  }];\n\n  var buttonTodayHandle = function buttonTodayHandle(buttonCategory) {\n    setLoading(true);\n    setType(\"news\");\n    axios.get(rootApiIP + \"/data/news_search_today\", {\n      params: {\n        \"date\": todayDate,\n        \"category\": buttonCategory\n      }\n    }).then(function (res) {\n      setData(res.data);\n      setLoading(false);\n      window.scrollTo({\n        left: 0,\n        top: document.body.scrollHeight,\n        behavior: \"smooth\"\n      });\n    }).catch(function (res) {\n      if (res.response.data === \"Session expired\") window.location.reload();\n      setLoading(false);\n    });\n  };\n\n  var buttonPastHandle = function buttonPastHandle(buttonCategory) {\n    setLoading(true);\n    setType(\"news\");\n    axios.get(rootApiIP + \"/data/news_search_past\", {\n      params: {\n        \"date\": todayDate,\n        \"category\": buttonCategory\n      }\n    }).then(function (res) {\n      setData(res.data);\n      setLoading(false);\n      window.scrollTo({\n        left: 0,\n        top: document.body.scrollHeight,\n        behavior: \"smooth\"\n      });\n    }).catch(function (res) {\n      if (res.response.data === \"Session expired\") window.location.reload();\n      setLoading(false);\n    });\n  };\n\n  useEffect(function () {\n    axios.get(rootApiIP + \"/data/news_summary\", {\n      params: {\n        \"date\": todayDate\n      }\n    }).then(function (res) {\n      setData0(res.data);\n    }).catch(function (res) {\n      if (res.response.data === \"Session expired\") window.location.reload();\n    });\n    axios.get(rootApiIP + \"/data/news_summary_statementdog\", {\n      params: {\n        \"date\": todayDate\n      }\n    }).then(function (res) {\n      setData1(res.data);\n    }).catch(function (res) {\n      if (res.response.data === \"Session expired\") window.location.reload();\n    });\n  }, []);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Backdrop, {\n    sx: {\n      color: '#fff',\n      zIndex: function zIndex(theme) {\n        return theme.zIndex.drawer + 1;\n      }\n    },\n    open: loading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 13\n    }\n  }, \"\\u8CC7\\u6599\\u8F09\\u5165\\u4E2D\\u2003\", /*#__PURE__*/React.createElement(CircularProgress, {\n    color: \"inherit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row mx-auto py-3\",\n    style: {\n      width: \"90vw\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    className: \"display-6 text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 17\n    }\n  }, \"\\u65B0\\u805E\\u8CC7\\u6599\\u5EAB\\u7E3D\\u89BD\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-7 mx-auto pt-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(DataGrid, {\n    columns: columns_summary_news,\n    rows: data0,\n    page: page0,\n    onPageChange: function onPageChange(newPage) {\n      return setPage0(newPage);\n    },\n    pageSize: pageSize0,\n    onPageSizeChange: function onPageSizeChange(newPageSize) {\n      return setPageSize0(newPageSize);\n    },\n    rowsPerPageOptions: [5, 10, 20],\n    getRowId: function getRowId(row) {\n      return row.ID;\n    },\n    components: {\n      Toolbar: GridToolbar\n    },\n    componentsProps: {\n      toolbar: {\n        showQuickFilter: true\n      }\n    },\n    pagination: true,\n    autoHeight: true,\n    disableColumnMenu: true,\n    disableColumnSelector: true,\n    disableDensitySelector: true,\n    disableColumnFilter: true,\n    disableSelectionOnClick: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-5 mx-auto pt-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(DataGrid, {\n    columns: columns_summary_statementdog,\n    rows: data1,\n    page: page1,\n    onPageChange: function onPageChange(newPage) {\n      return setPage1(newPage);\n    },\n    pageSize: pageSize1,\n    onPageSizeChange: function onPageSizeChange(newPageSize) {\n      return setPageSize1(newPageSize);\n    },\n    rowsPerPageOptions: [5, 10, 20],\n    getRowId: function getRowId(row) {\n      return row.ID;\n    },\n    components: {\n      Toolbar: GridToolbar\n    },\n    componentsProps: {\n      toolbar: {\n        showQuickFilter: true\n      }\n    },\n    pagination: true,\n    autoHeight: true,\n    disableColumnMenu: true,\n    disableColumnSelector: true,\n    disableDensitySelector: true,\n    disableColumnFilter: true,\n    disableSelectionOnClick: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 21\n    }\n  }))), /*#__PURE__*/React.createElement(\"h3\", {\n    className: \"display-6 text-center py-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 13\n    }\n  }, \"\\u65B0\\u805E\\u8CC7\\u6599\\u5EAB\\u67E5\\u8A62\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row mx-auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-11 mx-auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card h-100 p-0 mt-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mx-3 mt-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"nav nav-tabs\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    className: \"nav-item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"nav-link \".concat(type === \"news\" ? \"active\" : \"\"),\n    \"data-bs-toggle\": \"tab\",\n    onClick: function onClick() {\n      return setType(\"news\");\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 37\n    }\n  }, \"\\u65B0\\u805E\")), /*#__PURE__*/React.createElement(\"li\", {\n    className: \"nav-item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"nav-link \".concat(type === \"statementdog\" ? \"active\" : \"\"),\n    \"data-bs-toggle\": \"tab\",\n    onClick: function onClick() {\n      return setType(\"statementdog\");\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 37\n    }\n  }, \"\\u8CA1\\u5831\\u72D7\"))), type === \"news\" && /*#__PURE__*/React.createElement(NewsItem, {\n    setLoading: setLoading,\n    data: data,\n    setData: setData,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 50\n    }\n  }), type === \"statementdog\" && /*#__PURE__*/React.createElement(StatementdogItem, {\n    setLoading: setLoading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 58\n    }\n  }))))));\n}\n\nexport default NewsComp;","map":{"version":3,"sources":["/home/cosbi/financialSite/frontend/src/component/newsPage/newsComp.js"],"names":["Backdrop","Button","CircularProgress","List","ListItemButton","ListItemText","DataGrid","GridToolbar","axios","React","useEffect","useState","rootApiIP","columns_news","columns_statementdog","NewsItem","StatementdogItem","NewsComp","Today","Date","todayDate","getFullYear","String","getMonth","padStart","getDate","type","setType","loading","setLoading","data0","setData0","page0","setPage0","pageSize0","setPageSize0","data1","setData1","page1","setPage1","pageSize1","setPageSize1","dataNews","setDataNews","dataStatementdog","setDataStatementdog","columns_summary_news","field","headerName","flex","headerAlign","align","renderCell","rowData","buttonTodayHandle","value","buttonPastHandle","columns_summary_statementdog","buttonCategory","get","params","then","res","setData","data","window","scrollTo","left","top","document","body","scrollHeight","behavior","catch","response","location","reload","color","zIndex","theme","drawer","width","newPage","newPageSize","row","ID","Toolbar","toolbar","showQuickFilter"],"mappings":"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","sourcesContent":["import { Backdrop, Button, CircularProgress, List, ListItemButton, ListItemText } from '@mui/material';\nimport { DataGrid, GridToolbar } from '@mui/x-data-grid';\nimport axios from 'axios';\nimport React, { useEffect, useState } from 'react';\nimport { rootApiIP } from '../../constant';\nimport { columns_news, columns_statementdog } from '../column/column';\nimport NewsItem from './newsItem';\nimport StatementdogItem from './statementdogItem';\n\nfunction NewsComp() {\n    var Today = new Date()\n    const todayDate = Today.getFullYear() + \"-\" + String(Today.getMonth()+1).padStart(2, '0') + \"-\" + String(Today.getDate()).padStart(2, '0')\n\n    const [type, setType] = useState(\"news\")\n    const [loading, setLoading] = useState(false)\n    const [data0, setData0] = useState([])\n    const [page0, setPage0] = useState(0)\n    const [pageSize0, setPageSize0] = useState(10)\n\n    const [data1, setData1] = useState([])\n    const [page1, setPage1] = useState(0)\n    const [pageSize1, setPageSize1] = useState(10)\n\n    const [dataNews, setDataNews] = useState([])\n    const [dataStatementdog, setDataStatementdog] = useState([])\n\n    const columns_summary_news = [\n        { field: \"category\", headerName : \"新聞類別\", flex: 1, headerAlign: 'center', align: 'center' },\n        { field: \"todayQuantity\", headerName : todayDate + \"新聞數量\", flex: 1, headerAlign: 'center', align: 'center', renderCell : \n            rowData => <Button variant = \"text\" onClick = { () => buttonTodayHandle(rowData[\"row\"][\"category\"]) }>{rowData.value}</Button>\n        },\n        { field: \"pastQuantity\", headerName : todayDate + \"前新聞數量\", flex: 1, headerAlign: 'center', align: 'center', renderCell : \n            rowData => <Button variant = \"text\" onClick = { () => buttonPastHandle(rowData[\"row\"][\"category\"]) }>{rowData.value}</Button>\n        }\n    ];\n\n    const columns_summary_statementdog = [\n        { field: \"category\", headerName : \"新聞類別\", flex: 1, headerAlign: 'center', align: 'center' },\n        { field: \"todayQuantity\", headerName : todayDate + \"新聞數量\", flex: 1, headerAlign: 'center', align: 'center', renderCell : \n            rowData => <Button variant = \"text\" onClick = { () => buttonTodayHandle(rowData[\"row\"][\"category\"]) }>{rowData.value}</Button>\n        },\n        { field: \"pastQuantity\", headerName : todayDate + \"前新聞數量\", flex: 1, headerAlign: 'center', align: 'center', renderCell : \n            rowData => <Button variant = \"text\" onClick = { () => buttonPastHandle(rowData[\"row\"][\"category\"]) }>{rowData.value}</Button>\n        }\n    ];\n\n    const buttonTodayHandle = (buttonCategory) => {\n        setLoading(true)\n        setType(\"news\")\n\n        axios.get(rootApiIP + \"/data/news_search_today\", { params : {\n            \"date\" : todayDate,\n            \"category\" : buttonCategory\n        }})\n        .then((res) => {\n            setData(res.data)\n            setLoading(false)\n            window.scrollTo({\n                left : 0, \n                top : document.body.scrollHeight,\n                behavior : \"smooth\"\n            })\n        })\n        .catch((res) => {\n            if(res.response.data === \"Session expired\") window.location.reload()\n            setLoading(false)\n        })\n    }\n\n    const buttonPastHandle = (buttonCategory) => {\n        setLoading(true)\n        setType(\"news\")\n\n        axios.get(rootApiIP + \"/data/news_search_past\", { params : {\n            \"date\" : todayDate,\n            \"category\" : buttonCategory\n        }})\n        .then((res) => {\n            setData(res.data)\n            setLoading(false)\n            window.scrollTo({\n                left : 0, \n                top : document.body.scrollHeight,\n                behavior : \"smooth\"\n            })\n        })\n        .catch((res) => {\n            if(res.response.data === \"Session expired\") window.location.reload()\n            setLoading(false)\n        })\n    }\n\n    useEffect(() => {\n        axios.get(rootApiIP + \"/data/news_summary\", {params :{\n            \"date\" : todayDate,\n        }})\n        .then((res) => {\n            setData0(res.data)\n        })\n        .catch((res) => {\n            if(res.response.data === \"Session expired\") window.location.reload()\n        })\n\n        axios.get(rootApiIP + \"/data/news_summary_statementdog\", {params :{\n            \"date\" : todayDate,\n        }})\n        .then((res) => {\n            setData1(res.data)\n        })\n        .catch((res) => {\n            if(res.response.data === \"Session expired\") window.location.reload()\n        })\n    }, [])\n\n    return (\n        <>\n            <Backdrop\n                sx = {{ color: '#fff', zIndex: (theme) => theme.zIndex.drawer + 1 }}\n                open = { loading }\n            >\n                資料載入中&emsp;\n                <CircularProgress color = \"inherit\" />\n            </Backdrop>\n            \n            <div className = 'row mx-auto py-3' style = {{ width : \"90vw\" }}>\n                <h3 className = \"display-6 text-center\">新聞資料庫總覽</h3>\n\n                <div className = 'col-md-7 mx-auto pt-3'>\n                    <DataGrid\n                        columns = { columns_summary_news }\n                        rows = { data0 }\n                        page = { page0 }\n                        onPageChange={(newPage) => setPage0(newPage)}\n                        pageSize = { pageSize0 }\n                        onPageSizeChange={ (newPageSize) => setPageSize0(newPageSize) }\n                        rowsPerPageOptions = {[5, 10, 20]}\n                        getRowId = { row => row.ID }\n                        components = {{ Toolbar: GridToolbar }}\n                        componentsProps = {{ toolbar: { showQuickFilter: true },}}\n                        pagination\n                        autoHeight\n                        disableColumnMenu\n                        disableColumnSelector\n                        disableDensitySelector\n                        disableColumnFilter\n                        disableSelectionOnClick = { true }\n                    />\n                </div>\n\n                <div className = 'col-md-5 mx-auto pt-3'>\n                    <DataGrid\n                        columns = { columns_summary_statementdog }\n                        rows = { data1 }\n                        page = { page1 }\n                        onPageChange={(newPage) => setPage1(newPage)}\n                        pageSize = { pageSize1 }\n                        onPageSizeChange={ (newPageSize) => setPageSize1(newPageSize) }\n                        rowsPerPageOptions = {[5, 10, 20]}\n                        getRowId = { row => row.ID }\n                        components = {{ Toolbar: GridToolbar }}\n                        componentsProps = {{ toolbar: { showQuickFilter: true },}}\n                        pagination\n                        autoHeight\n                        disableColumnMenu\n                        disableColumnSelector\n                        disableDensitySelector\n                        disableColumnFilter\n                        disableSelectionOnClick = { true }\n                    />\n                </div>\n            </div>\n\n            <h3 className = \"display-6 text-center py-3\">新聞資料庫查詢</h3>\n            \n            <div className = 'row mx-auto'>\n                <div className = 'col-md-11 mx-auto'>\n                    <div className = \"card h-100 p-0 mt-3\">\n                        <div className = 'mx-3 mt-2'>\n                            <ul className = \"nav nav-tabs\">\n                                <li className = \"nav-item\">\n                                    <button className = {`nav-link ${ type === \"news\" ? \"active\" : \"\"}`} data-bs-toggle = \"tab\" onClick = {() => setType(\"news\")}>新聞</button>\n                                </li>\n\n                                <li className = \"nav-item\">\n                                    <button className = {`nav-link ${ type === \"statementdog\" ? \"active\" : \"\"}`} data-bs-toggle = \"tab\" onClick = {() => setType(\"statementdog\")}>財報狗</button>\n                                </li>\n                            </ul>\n\n                            { type === \"news\" && <NewsItem setLoading = { setLoading } data = { data } setData = { setData }/>}\n                            { type === \"statementdog\" && <StatementdogItem setLoading = { setLoading }/>}\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </>\n    );\n}\n\nexport default NewsComp;"]},"metadata":{},"sourceType":"module"}