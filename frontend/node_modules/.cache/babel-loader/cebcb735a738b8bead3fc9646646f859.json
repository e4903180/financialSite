{"ast":null,"code":"import _slicedToArray from \"/home/cosbi/financialSite/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/cosbi/financialSite/frontend/src/component/homePage/homeComp.js\";\nimport React, { useCallback, useContext, useEffect, useState } from 'react';\nimport axios from 'axios';\nimport bgimage from \"../../image/coins_on_chart.jpg\";\nimport { DataGrid, GridToolbar } from '@mui/x-data-grid';\nimport { rootApiIP, WSContext } from '../../constant';\nimport { columns1 } from '../column/column';\n\nfunction HomeComp() {\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      data = _useState2[0],\n      setData = _useState2[1];\n\n  var _useState3 = useState(5),\n      _useState4 = _slicedToArray(_useState3, 2),\n      pageSize = _useState4[0],\n      setPageSize = _useState4[1];\n\n  var _useState5 = useState([0.0, 0.0, 0.0]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      realTimePrice = _useState6[0],\n      setRealTimePrice = _useState6[1];\n\n  var socket = useContext(WSContext);\n  var HandleRealTimePrice = useCallback(function (arg) {\n    setRealTimePrice(arg);\n  }, []);\n  useEffect(function () {\n    axios.get(rootApiIP + \"/data/newest15\").then(function (res) {\n      setData(res.data);\n    }).catch(function (res) {\n      if (res.response.data === \"Session expired\") window.location.reload();\n    });\n  }, []);\n  useEffect(function () {\n    if (socket) {\n      socket.on(\"REGISTER_REAL_TIME_PRICE\", [\"2330\"], function (arg) {\n        return HandleRealTimePrice(arg);\n      });\n      return function () {\n        socket.off(\"REGISTER_REAL_TIME_PRICE\", function (arg) {\n          return HandleRealTimePrice(arg);\n        });\n      };\n    }\n  }, [socket]);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"jumbotron jumbotron-fluid d-flex\",\n    style: {\n      backgroundImage: \"url(\".concat(bgimage, \")\"),\n      opacity: \"0.8\",\n      backgroundAttachment: \"fixed\",\n      backgroundSize: \"cover\",\n      height: \"60vh\",\n      justifyContent: \"center\",\n      alignItems: \"center\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"display-4\",\n    style: {\n      color: \"white\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 21\n    }\n  }, \"Financial Database\"), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"lead\",\n    style: {\n      color: \"white\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 21\n    }\n  }, \"Easily and quickly\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row mx-auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-6 mx-auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    className: \"display-4 text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 21\n    }\n  }, \"\\u5373\\u6642\\u50F9\\u683C\"), /*#__PURE__*/React.createElement(\"table\", {\n    className: \"table table-striped\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 33\n    }\n  }, \"\\u80A1\\u7968\\u4EE3\\u865F\"), /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 33\n    }\n  }, \"\\u5373\\u6642\\u50F9\\u683C\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 33\n    }\n  }, \"2330\"), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 33\n    }\n  }, realTimePrice[0])), /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 33\n    }\n  }, \"2881\"), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 33\n    }\n  }, realTimePrice[1])), /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 33\n    }\n  }, \"2603\"), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 33\n    }\n  }, realTimePrice[2])))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container-fluid\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-10 mx-auto py-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    className: \"display-5 text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 21\n    }\n  }, \"\\u6700\\u65B015\\u7B46\\u500B\\u80A1\\u7814\\u7A76\\u8CC7\\u6599\"), /*#__PURE__*/React.createElement(DataGrid, {\n    columns: columns1,\n    rows: data,\n    pageSize: pageSize,\n    onPageSizeChange: function onPageSizeChange(newPageSize) {\n      return setPageSize(newPageSize);\n    },\n    rowsPerPageOptions: [5, 10, 20],\n    getRowId: function getRowId(row) {\n      return row.ID;\n    },\n    components: {\n      Toolbar: GridToolbar\n    },\n    componentsProps: {\n      toolbar: {\n        showQuickFilter: true\n      }\n    },\n    pagination: true,\n    autoHeight: true,\n    disableColumnMenu: true,\n    disableColumnSelector: true,\n    disableDensitySelector: true,\n    disableColumnFilter: true,\n    disableSelectionOnClick: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 21\n    }\n  }))));\n}\n\nexport default HomeComp;","map":{"version":3,"sources":["/home/cosbi/financialSite/frontend/src/component/homePage/homeComp.js"],"names":["React","useCallback","useContext","useEffect","useState","axios","bgimage","DataGrid","GridToolbar","rootApiIP","WSContext","columns1","HomeComp","data","setData","pageSize","setPageSize","realTimePrice","setRealTimePrice","socket","HandleRealTimePrice","arg","get","then","res","catch","response","window","location","reload","on","off","backgroundImage","opacity","backgroundAttachment","backgroundSize","height","justifyContent","alignItems","color","newPageSize","row","ID","Toolbar","toolbar","showQuickFilter"],"mappings":"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","sourcesContent":["import React, { useCallback, useContext, useEffect, useState } from 'react';\nimport axios from 'axios';\nimport bgimage from \"../../image/coins_on_chart.jpg\"\nimport { DataGrid, GridToolbar } from '@mui/x-data-grid';\nimport { rootApiIP, WSContext } from '../../constant'\nimport { columns1 } from '../column/column'\n\nfunction HomeComp() {\n    let [data, setData] = useState([]);\n    const [pageSize, setPageSize] = useState(5);\n    const [realTimePrice, setRealTimePrice] = useState([0.0, 0.0, 0.0])\n    const socket = useContext(WSContext);\n\n    const HandleRealTimePrice = useCallback((arg) => {\n        setRealTimePrice(arg)\n    }, [])\n\n    useEffect(() => {\n        axios.get(rootApiIP + \"/data/newest15\")\n        .then(res => {\n            setData(res.data);\n        }).catch(res => {\n            if(res.response.data === \"Session expired\") window.location.reload()\n        })\n    }, [])\n\n    useEffect(() => {\n        if(socket){\n            socket.on(\"REGISTER_REAL_TIME_PRICE\", [\"2330\", ], (arg) => HandleRealTimePrice(arg));\n\n            return () => {\n                socket.off(\"REGISTER_REAL_TIME_PRICE\", (arg) => HandleRealTimePrice(arg));\n            };\n        }\n    }, [socket])\n\n    return (\n        <>\n            <div className = 'jumbotron jumbotron-fluid d-flex' style = {{ backgroundImage : `url(${bgimage})`, opacity : \"0.8\", backgroundAttachment : \"fixed\", backgroundSize : \"cover\", height : \"60vh\", justifyContent : \"center\", alignItems : \"center\" }}>\n                <div className = 'text-center'>\n                    <h1 className = \"display-4\" style = {{ color : \"white\" }}>Financial Database</h1>\n                    <p className = 'lead' style = {{ color : \"white\" }}>Easily and quickly</p>\n                </div>\n            </div>\n\n            <div className = 'row mx-auto'>\n                <div className = 'col-md-6 mx-auto'>\n                    <h3 className = \"display-4 text-center\">即時價格</h3>\n\n                    <table className = \"table table-striped\">\n                        <thead>\n                            <tr>\n                                <th scope = \"col\">股票代號</th>\n                                <th scope = \"col\">即時價格</th>\n                            </tr>\n                        </thead>\n\n                        <tbody>\n                            <tr>\n                                <th scope = \"row\">2330</th>\n                                <td>{realTimePrice[0]}</td>\n                            </tr>\n                            <tr>\n                                <th scope = \"row\">2881</th>\n                                <td>{realTimePrice[1]}</td>\n                            </tr>\n\n                            <tr>\n                                <th scope = \"row\">2603</th>\n                                <td>{realTimePrice[2]}</td>\n                            </tr>\n                        </tbody>\n                    </table>\n                </div>\n            </div>\n\n            <div className = 'container-fluid'>\n                <div className = 'col-md-10 mx-auto py-3'>\n                    <h3 className = \"display-5 text-center\">最新15筆個股研究資料</h3>\n                    <DataGrid\n                        columns = { columns1 } \n                        rows = { data }\n                        pageSize = { pageSize }\n                        onPageSizeChange={ (newPageSize) => setPageSize(newPageSize) }\n                        rowsPerPageOptions = {[5, 10, 20]}\n                        getRowId = { row => row.ID }\n                        components = {{ Toolbar: GridToolbar }}\n                        componentsProps = {{ toolbar: { showQuickFilter: true },}}\n                        pagination\n                        autoHeight\n                        disableColumnMenu\n                        disableColumnSelector\n                        disableDensitySelector\n                        disableColumnFilter\n                        disableSelectionOnClick = { true }\n                    />\n                </div>\n            </div>\n        </>\n    );\n}\n\nexport default HomeComp;"]},"metadata":{},"sourceType":"module"}