{"ast":null,"code":"import _slicedToArray from \"/home/cosbi/financialSite/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/cosbi/financialSite/frontend/src/component/subButton/subSupportResistanceForm.js\";\nimport React, { useEffect, useState } from 'react';\nimport { Typeahead } from 'react-bootstrap-typeahead';\nimport { AutoCom } from '../../autoCom';\nimport { Alert, Snackbar } from '@mui/material';\nimport { rootApiIP } from '../../constant';\nimport axios from 'axios';\n\nfunction SubSupportResistanceForm(props) {\n  var Today = new Date();\n  var year = Today.getFullYear();\n  var month = Today.getMonth() + 1 - 1;\n  var date = 1;\n\n  var _useState = useState([{\n    \"ID\": 0,\n    \"stock_num_name\": \"\"\n  }]),\n      _useState2 = _slicedToArray(_useState, 2),\n      stockNum = _useState2[0],\n      setStockNum = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      inputError = _useState4[0],\n      setInputError = _useState4[1];\n\n  var _useState5 = useState((year - 5).toString() + \"-01-01\"),\n      _useState6 = _slicedToArray(_useState5, 2),\n      startDate = _useState6[0],\n      setStartDate = _useState6[1];\n\n  var _useState7 = useState(\"\"),\n      _useState8 = _slicedToArray(_useState7, 2),\n      endDate = _useState8[0],\n      setEndDate = _useState8[1];\n\n  var _useState9 = useState(\"method1\"),\n      _useState10 = _slicedToArray(_useState9, 2),\n      method = _useState10[0],\n      setMethod = _useState10[1];\n\n  var _useState11 = useState(20),\n      _useState12 = _slicedToArray(_useState11, 2),\n      maLen = _useState12[0],\n      setMaLen = _useState12[1];\n\n  var _useState13 = useState(\"sma\"),\n      _useState14 = _slicedToArray(_useState13, 2),\n      maType = _useState14[0],\n      setMaType = _useState14[1];\n\n  var _useState15 = useState(false),\n      _useState16 = _slicedToArray(_useState15, 2),\n      sub = _useState16[0],\n      setSub = _useState16[1];\n\n  var _useState17 = useState(false),\n      _useState18 = _slicedToArray(_useState17, 2),\n      open = _useState18[0],\n      setOpen = _useState18[1];\n\n  if (month === 0) {\n    year -= 1;\n    month = 12;\n  }\n\n  var TodayDate = year.toString() + \"-\" + month.toString().padStart(2, '0') + \"-\" + date.toString().padStart(2, '0');\n  var autocom = AutoCom.AutoComList;\n\n  function submit(e) {\n    e.preventDefault();\n\n    if (stockNum.length !== 0 && autocom.map(function (element) {\n      return element.stock_num_name;\n    }).includes(stockNum[0][\"stock_num_name\"]) === true && endDate !== \"\") {\n      setInputError(false);\n      setOpen(false);\n      axios.post(rootApiIP + \"/data/handle_support_resistance_sub\", {\n        \"stockNum\": stockNum[0][\"stock_num_name\"].slice(0, 4),\n        \"startDate\": startDate,\n        \"endDate\": endDate,\n        \"maType\": maType,\n        \"maLen\": maLen,\n        \"method\": method,\n        \"subType\": props.subType\n      }).then(function (res) {\n        setOpen(true);\n        setSub(false);\n      }).catch(function (res) {\n        if (res.response.data === \"Session expired\") window.location.reload();\n\n        if (res.response.status === 401) {\n          setOpen(true);\n          setSub(true);\n        }\n      });\n    } else {\n      setInputError(true);\n    }\n  }\n\n  var handleClose = function handleClose(event, reason) {\n    if (reason === 'clickaway') {\n      return;\n    }\n\n    setOpen(false);\n  };\n\n  useEffect(function () {\n    return function () {\n      setStockNum;\n    };\n  });\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal fade\",\n    id: \"checkEndTimeModal\",\n    tabIndex: \"-1\",\n    \"aria-hidden\": \"true\",\n    \"data-bs-backdrop\": \"static\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-dialog modal-dialog-centered\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"modal-title fs-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 29\n    }\n  }, \"\\u8A02\\u95B1\\u8CC7\\u8A0A\\u78BA\\u8A8D\"), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"btn-close\",\n    \"data-bs-dismiss\": \"modal\",\n    \"aria-label\": \"Close\",\n    onClick: function onClick() {\n      return setOpen(false);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 29\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row mx-auto py-3\",\n    style: {\n      width: \"100%\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"stockNum_or_Name\",\n    className: \"col-md-4 col-form-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 41\n    }\n  }, \"\\u80A1\\u7968\\u4EE3\\u865F&\\u540D\\u7A31:\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-8\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(Typeahead, {\n    id: \"stockNum_or_Name\",\n    labelKey: \"stock_num_name\",\n    onChange: setStockNum,\n    options: autocom,\n    placeholder: \"\\u8ACB\\u8F38\\u5165\\u80A1\\u7968\\u4EE3\\u865F\\u6216\\u540D\\u7A31\",\n    selected: stockNum,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 45\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group row py-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"date1\",\n    className: \"col-md-4 col-form-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 41\n    }\n  }, \"\\u6B77\\u53F2\\u8CC7\\u6599\\u8D77\\u59CB\\u65E5:\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-8\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"date\",\n    id: \"date1\",\n    className: \"form-control\",\n    onChange: function onChange(e) {\n      return setStartDate(e.target.value);\n    },\n    max: TodayDate,\n    value: startDate,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 45\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group row py-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"date1\",\n    className: \"col-md-4 col-form-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 41\n    }\n  }, \"\\u8A02\\u95B1\\u5230\\u671F\\u65E5:\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-8\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"date\",\n    id: \"date1\",\n    className: \"form-control\",\n    onChange: function onChange(e) {\n      return setEndDate(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 45\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group row py-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"maLen\",\n    className: \"col-md-4 col-form-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 41\n    }\n  }, \"MA\\u9577\\u5EA6:\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(\"select\", {\n    id: \"maLen\",\n    className: \"form-select\",\n    onChange: function onChange(e) {\n      return setMaLen(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 45\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    value: \"20\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 49\n    }\n  }, \"20\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"30\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 49\n    }\n  }, \"30\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"50\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 49\n    }\n  }, \"50\")))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group row py-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"ma\",\n    className: \"col-md-4 col-form-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 41\n    }\n  }, \"MA\\u985E\\u578B:\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(\"select\", {\n    id: \"ma\",\n    className: \"form-select\",\n    onChange: function onChange(e) {\n      return setMaType(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 45\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    value: \"sma\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 49\n    }\n  }, \"sma\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"wma\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 49\n    }\n  }, \"wma\")))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group row py-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"method\",\n    className: \"col-md-4 col-form-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 41\n    }\n  }, \"\\u8A08\\u7B97\\u65B9\\u5F0F:\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(\"select\", {\n    id: \"method\",\n    className: \"form-select\",\n    onChange: function onChange(e) {\n      return setMethod(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 45\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    value: \"method1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 49\n    }\n  }, \"\\u65B9\\u6CD5\\u4E00\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"method2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 49\n    }\n  }, \"\\u65B9\\u6CD5\\u4E8C\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"method3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 49\n    }\n  }, \"\\u65B9\\u6CD5\\u4E09\"))))), inputError ? /*#__PURE__*/React.createElement(\"p\", {\n    className: \"text-center\",\n    style: {\n      color: \"red\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 48\n    }\n  }, \"\\u80A1\\u7968\\u4EE3\\u865F&\\u540D\\u7A31\\u6216\\u8A02\\u95B1\\u5230\\u671F\\u65E5\\u683C\\u5F0F\\u932F\\u8AA4\") : /*#__PURE__*/React.createElement(React.Fragment, null))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-footer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"btn btn-primary mx-auto\",\n    onClick: function onClick(e) {\n      return submit(e);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 29\n    }\n  }, \"\\u78BA\\u8A8D\")), /*#__PURE__*/React.createElement(Snackbar, {\n    open: open,\n    autoHideDuration: 6000,\n    onClose: handleClose,\n    anchorOrigin: {\n      vertical: \"top\",\n      horizontal: \"center\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 25\n    }\n  }, sub ? /*#__PURE__*/React.createElement(Alert, {\n    onClose: handleClose,\n    severity: \"error\",\n    sx: {\n      width: '100%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 33\n    }\n  }, \"\\u5DF2\\u7D93\\u8A02\\u95B1\\u904E\\u76F8\\u540C\\u53C3\\u6578\\u8ACB\\u518D\\u6B21\\u78BA\\u8A8D\") : /*#__PURE__*/React.createElement(Alert, {\n    onClose: handleClose,\n    severity: \"success\",\n    sx: {\n      width: '100%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 33\n    }\n  }, props.subType, \" \\u8A02\\u95B1\\u6210\\u529F\"))))));\n}\n\nexport default SubSupportResistanceForm;","map":{"version":3,"sources":["/home/cosbi/financialSite/frontend/src/component/subButton/subSupportResistanceForm.js"],"names":["React","useEffect","useState","Typeahead","AutoCom","Alert","Snackbar","rootApiIP","axios","SubSupportResistanceForm","props","Today","Date","year","getFullYear","month","getMonth","date","stockNum","setStockNum","inputError","setInputError","toString","startDate","setStartDate","endDate","setEndDate","method","setMethod","maLen","setMaLen","maType","setMaType","sub","setSub","open","setOpen","TodayDate","padStart","autocom","AutoComList","submit","e","preventDefault","length","map","element","stock_num_name","includes","post","slice","subType","then","res","catch","response","data","window","location","reload","status","handleClose","event","reason","width","target","value","color","vertical","horizontal"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Typeahead } from 'react-bootstrap-typeahead';\nimport { AutoCom } from '../../autoCom';\nimport { Alert, Snackbar } from '@mui/material';\nimport { rootApiIP } from '../../constant';\nimport axios from 'axios';\n\nfunction SubSupportResistanceForm(props) {\n    var Today = new Date();\n    let year = Today.getFullYear()\n    let month = (Today.getMonth() + 1) - 1\n    const date = 1\n\n    const [stockNum, setStockNum] = useState([{\"ID\" : 0, \"stock_num_name\" : \"\"}]);\n    const [inputError, setInputError] = useState(false);\n    const [startDate, setStartDate] = useState((year - 5).toString() + \"-01-01\");\n    const [endDate, setEndDate] = useState(\"\");\n    const [method, setMethod] = useState(\"method1\");\n    const [maLen, setMaLen] = useState(20);\n    const [maType, setMaType] = useState(\"sma\");\n    const [sub, setSub] = useState(false);\n    const [open, setOpen] = useState(false);\n\n    if(month === 0){\n        year -= 1\n        month = 12\n    }\n\n    var TodayDate = year.toString() + \"-\" + month.toString().padStart(2, '0') + \"-\" + date.toString().padStart(2, '0')\n    const autocom = AutoCom.AutoComList;\n\n    function submit(e){\n        e.preventDefault()\n\n        if((stockNum.length !== 0) && (autocom.map(element => element.stock_num_name).includes(stockNum[0][\"stock_num_name\"]) === true) && (endDate !== \"\")){\n            setInputError(false)\n            setOpen(false)\n\n            axios.post(rootApiIP + \"/data/handle_support_resistance_sub\", {\n                \"stockNum\" : stockNum[0][\"stock_num_name\"].slice(0, 4),\n                \"startDate\" : startDate,\n                \"endDate\" : endDate,\n                \"maType\" : maType,\n                \"maLen\" : maLen,\n                \"method\" : method,\n                \"subType\" : props.subType\n            })\n            .then((res) => {\n                setOpen(true)\n                setSub(false)\n            })\n            .catch((res) => {\n                if(res.response.data === \"Session expired\") window.location.reload()\n\n                if(res.response.status === 401){\n                    setOpen(true)\n                    setSub(true)\n                }\n            })\n        }else{\n            setInputError(true)\n        }\n    }\n\n    const handleClose = (event, reason) => {\n        if (reason === 'clickaway') {\n          return;\n        }\n    \n        setOpen(false);\n    };\n\n    useEffect(() => {\n        return () => {\n            setStockNum\n        }\n    })\n\n    return (\n        <>\n            <div className = \"modal fade\" id = \"checkEndTimeModal\" tabIndex = \"-1\" aria-hidden = \"true\" data-bs-backdrop = \"static\">\n                <div className = \"modal-dialog modal-dialog-centered\">\n                    <div className = \"modal-content\">\n                        <div className = \"modal-header\">\n                            <h1 className = \"modal-title fs-5\">訂閱資訊確認</h1>\n                            <button type = \"button\" className = \"btn-close\" data-bs-dismiss = \"modal\" aria-label = \"Close\" onClick = { () => setOpen(false) }></button>\n                        </div>\n\n                        <div className = \"modal-body\">\n                            <div className = 'row mx-auto py-3' style = {{ width : \"100%\" }}>\n                                <div>\n                                    <div className = 'form-group row'>\n                                        <label htmlFor = \"stockNum_or_Name\" className = \"col-md-4 col-form-label\">股票代號&名稱:</label>\n                                        <div className = 'col-md-8'>\n                                            <Typeahead\n                                                id = \"stockNum_or_Name\"\n                                                labelKey = \"stock_num_name\"\n                                                onChange = { setStockNum }\n                                                options = { autocom }\n                                                placeholder = \"請輸入股票代號或名稱\"\n                                                selected = { stockNum }\n                                            />\n                                        </div>\n                                    </div>\n\n                                    <div className = 'form-group row py-3'>\n                                        <label htmlFor = \"date1\" className = \"col-md-4 col-form-label\">歷史資料起始日:</label>\n                                        <div className = 'col-md-8'>\n                                            <input type = \"date\" id = \"date1\" className = \"form-control\" onChange = {e => setStartDate(e.target.value)} max = { TodayDate } value = { startDate }></input>\n                                        </div>\n                                    </div>\n\n                                    <div className = 'form-group row py-3'>\n                                        <label htmlFor = \"date1\" className = \"col-md-4 col-form-label\">訂閱到期日:</label>\n                                        <div className = 'col-md-8'>\n                                            <input type = \"date\" id = \"date1\" className = \"form-control\" onChange = {e => setEndDate(e.target.value)}></input>\n                                        </div>\n                                    </div>\n\n                                    <div className = 'form-group row py-3'>\n                                        <label htmlFor = \"maLen\" className = \"col-md-4 col-form-label\">MA長度:</label>\n                                        <div className = 'col-md-3'>\n                                            <select id = \"maLen\" className = \"form-select\" onChange = {e => setMaLen(e.target.value)}>\n                                                <option value = \"20\">20</option>\n                                                <option value = \"30\">30</option>\n                                                <option value = \"50\">50</option>\n                                            </select>\n                                        </div>\n                                    </div>\n\n                                    <div className = 'form-group row py-3'>\n                                        <label htmlFor = \"ma\" className = \"col-md-4 col-form-label\">MA類型:</label>\n                                        <div className = 'col-md-3'>\n                                            <select id = \"ma\" className = \"form-select\" onChange = {e => setMaType(e.target.value)}>\n                                                <option value = \"sma\">sma</option>\n                                                <option value = \"wma\">wma</option>\n                                            </select>\n                                        </div>\n                                    </div>\n\n                                    <div className = 'form-group row py-3'>\n                                        <label htmlFor = \"method\" className = \"col-md-4 col-form-label\">計算方式:</label>\n                                        <div className = 'col-md-3'>\n                                            <select id = \"method\" className = \"form-select\" onChange = {e => setMethod(e.target.value)}>\n                                                <option value = \"method1\">方法一</option>\n                                                <option value = \"method2\">方法二</option>\n                                                <option value = \"method3\">方法三</option>\n                                            </select>\n                                        </div>\n                                    </div>\n                                </div>\n\n                                { inputError ? <p className = 'text-center' style = {{ color : \"red\" }}>股票代號&名稱或訂閱到期日格式錯誤</p> : <></> }\n                            </div>\n                        </div>\n\n                        <div className = \"modal-footer\">\n                            <button type = \"button\" className = \"btn btn-primary mx-auto\" onClick = { (e) => submit(e) }>確認</button>\n                        </div>\n\n                        <Snackbar open = {open} autoHideDuration = { 6000 } onClose = { handleClose } anchorOrigin = {{vertical : \"top\", horizontal : \"center\"}}>\n                            {sub ? \n                                <Alert onClose = { handleClose } severity = \"error\" sx = {{ width: '100%' }}>\n                                    已經訂閱過相同參數請再次確認\n                                </Alert>\n                                :\n                                <Alert onClose = { handleClose } severity = \"success\" sx = {{ width: '100%' }}>\n                                    {props.subType} 訂閱成功\n                                </Alert>\n                            }\n                        </Snackbar>\n                    </div>\n                </div>\n            </div>\n        </>\n    );\n}\n\nexport default SubSupportResistanceForm;"]},"metadata":{},"sourceType":"module"}